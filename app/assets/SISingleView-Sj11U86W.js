import{d as O,am as T,B as h,o,c as u,u as a,a as v,bh as J,b as c,l as m,g as b,t as S,f as y,v as E,e as l,j as D,S as R,_ as M,k as U,r as x,an as A,w as q,C as G,p as K,cW as P,aI as W}from"./index-B9ncFhZ9.js";import{_ as w}from"./OpenNewTabButton.vue_vue_type_script_setup_true_lang-N3oNufr4.js";import{a as C,F as V,u as X,_ as Y}from"./useLoadSIPhrases-B62SkcB8.js";import{g as $,a as z}from"./utils-BUzwWt9V.js";import"./setItemToLS-BDlwVMSR.js";const Q={class:"h-full"},Z={class:"nka-row flex items-center gap-2 font-semibold flex justify-content-center"},ee=["innerHTML"],ae={key:1,class:"font-semibold"},se=["innerHTML"],te=O({__name:"SIAllParams",setup(g){const n=T(V),t=C(),p=h(()=>t.lastParsedSI==null?[]:n===895?Object.entries(t.lastParsedSI).flatMap(([r,s])=>Object.entries(s).filter(([e])=>e!=="n").map(([e,i])=>({nka:Number(r),name:e,value:i}))):Object.entries(t.lastParsedSI).map(([r,s])=>({name:r,value:s})));return(r,s)=>(o(),u("div",Q,[a(t).parseError?(o(),v(a(R),{key:1,severity:"error",closable:!1},{default:c(()=>[b(S(a(t).parseError),1)]),_:1})):(o(),v(a(D),{key:0,class:"h-full max-h-full p-datatable-sm",value:p.value,"responsive-layout":"scroll","body-style":"min-width: 10rem","group-rows-by":a(n)===895?"nka":void 0,rowGroupMode:"subheader",sortMode:"single",sortField:"nka",sortOrder:1,"scroll-height":"100%"},J({empty:c(()=>[s[0]||(s[0]=b(" Нет информации для отображения "))]),default:c(()=>[a(n)===895?(o(),v(a(y),{key:0,field:"nka",header:"НКА"})):E("",!0),l(a(y),{field:"name",header:"Параметр","body-style":"width: 9rem"},{body:c(({data:{name:e}})=>[a($)(e)?(o(),u("span",{key:0,class:"font-semibold",innerHTML:a($)(e)},null,8,ee)):(o(),u("span",ae,S(e),1)),m("span",{innerHTML:a(z)(e)},null,8,se)]),_:1}),l(a(y),{field:"value",header:"Значение"})]),_:2},[a(n)===895?{name:"groupheader",fn:c(e=>[m("div",Z,[s[1]||(s[1]=b(" НКА ")),m("span",null,S(e.data.nka),1)])]),key:"0"}:void 0]),1032,["value","group-rows-by"]))]))}}),re=M(te,[["__scopeId","data-v-9cb5f90c"]]),oe={class:"m-auto h-full flex gap-5",style:{width:"80%"}},le={class:"h-full flex flex-column"},ne={key:0,class:"mt-3 flex flex-column",style:{gap:"1em"}},ie=O({__name:"SISingleView",props:{selected:{},params:{},si:{}},setup(g){const n=U(),t=g,p=JSON.parse(t.params),r=h(()=>JSON.parse(t.si)),s=JSON.parse(t.selected),e=x(),i=x(),j=T("updatePageTitle"),f=h(()=>r.value.siForm);A(V,f.value);const{phrases:L,isLoading:B,phraseError:F}=X(p),k=C(),H=()=>{e.value=s},I=()=>{const{phrNum:N,nkaType:_,...d}=e==null?void 0:e.value;i.value={...d},k.parseSIParams={...d,phrNum:N}};return q(()=>e.value,()=>{I(),k.getParsedSI()}),G(()=>{j(`Форма: ${f.value}, НКА: ${r.value.nkuNum} (${n.nkuNumTosysNum(r.value.nkuNum)??"-"}), время закладки СИ: ${K(r.value.timestamp)}`),H(),e.value&&I()}),(N,_)=>(o(),u("div",oe,[m("div",le,[l(Y,{selection:e.value,"onUpdate:selection":_[0]||(_[0]=d=>e.value=d),class:"max-h-full border-1 surface-border",data:a(L)??[],"is-loading":a(B),error:a(F)},null,8,["selection","data","is-loading","error"]),e.value&&f.value===893?(o(),u("div",ne,[l(w,{class:"p-button-outlined",label:"Сравнить c ЭИ на след. tb","component-name":"SICompareEI",params:{params:JSON.stringify({...i.value}),type:a(P).NEXT},disabled:!e.value},null,8,["params","disabled"]),l(w,{class:"p-button-outlined",label:"Сравнить c ЭИ на предыд. tb","component-name":"SICompareEI",params:{params:JSON.stringify({...i.value}),type:a(P).PREVIOUS},disabled:!e.value},null,8,["params","disabled"])])):E("",!0)]),l(a(W),{layout:"vertical"}),l(re,{class:"border-1 surface-border flex-grow-1"})]))}}),fe=M(ie,[["__scopeId","data-v-e98b23b7"]]);export{fe as default};
