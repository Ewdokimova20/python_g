import{d as A,r as z,G as R,B as k,aL as K,w as P,C as U,ap as T,_ as I,o as i,c as n,t as p,v as m,l as s,O as M,aM as G,F as u,h as b,a4 as J,y as C,aC as E,a7 as q,s as Q,aN as W,e as V,u as H}from"./index-B9ncFhZ9.js";const X=A({name:"my-table",emits:["return-checked-rows","do-search","is-finished","get-now-page"],props:{isLoading:{type:Boolean,require:!0},isReSearch:{type:Boolean,require:!0},hasCheckbox:{type:Boolean,default:!1},title:{type:String,default:""},columns:{type:Array,default:()=>[]},rows:{type:Array,default:()=>[]},pageSize:{type:Number,default:10},total:{type:Number,default:100},page:{type:Number,default:1},sortable:{type:Object,default:()=>({order:"id",sort:"asc"})},messages:{type:Object,default:()=>({pagingInfo:"Showing {0}-{1} of {2}",pageSizeChangeLabel:"Row count:",gotoPageLabel:"Go to page:",noDataAvailable:"No data"})},isStaticMode:{type:Boolean,default:!1},isSlotMode:{type:Boolean,default:!1},isHidePaging:{type:Boolean,default:!1},pageOptions:{type:Array,default:()=>[{value:10,text:10},{value:25,text:25},{value:50,text:50}]}},setup(a,{emit:l,slots:y}){let v=z(null),S=a.pageOptions,c=a.pageOptions.length>0?z(S[0].value):z(a.pageSize);S.length>0&&S.forEach(t=>{Object.prototype.hasOwnProperty.call(t,"value")&&Object.prototype.hasOwnProperty.call(t,"text")&&a.pageSize==t.value&&(c.value=t.value)});const e=R({isSlotMode:a.isSlotMode,isCheckAll:!1,isHidePaging:a.isHidePaging,keyColumn:k(()=>{let t="";return Object.assign(a.columns).forEach(o=>{o.isKey&&(t=o.field)}),t}),page:a.page,pageSize:c.value,maxPage:k(()=>{if(a.total<=0)return 0;let t=Math.floor(a.total/e.pageSize);return a.total%e.pageSize>0&&t++,t}),offset:k(()=>(e.page-1)*e.pageSize+1),limit:k(()=>{let t=e.page*e.pageSize;return a.total>=t?t:a.total}),paging:k(()=>{let t=e.page-2<=0?1:e.page-2;e.maxPage-e.page<=2&&(t=e.maxPage-4),t=t<=0?1:t;let o=[];for(let g=t;g<=e.maxPage;g++)o.length<5&&o.push(g);return o}),order:a.sortable.order,sort:a.sortable.sort,pageOptions:k(()=>{var o;const t=[];return(o=a.pageOptions)==null||o.forEach(g=>{t.push({value:g.value,text:g.text})}),t})}),d=k(()=>{let t=e.order,o=1;e.sort==="desc"&&(o=-1);let g=a.rows;g.sort((h,N)=>h[t]<N[t]?-1*o:h[t]>N[t]?o:0);let f=[];for(let h=e.offset-1;h<e.limit;h++)g[h]&&f.push(g[h]);return T(function(){L()}),f}),r=z([]);a.hasCheckbox&&(K(()=>{r.value=[]}),P(()=>e.isCheckAll,t=>{let o=[];r.value.forEach(g=>{g&&(g.checked=t,g.checked&&o.push(g.value))}),l("return-checked-rows",o)}));const w=()=>{let t=[];r.value.forEach(o=>{o&&o.checked&&t.push(o.value)}),l("return-checked-rows",t)},D=()=>{r.value.forEach(t=>{t&&t.checked&&(t.checked=!1)}),l("return-checked-rows",[])},B=t=>{let o="asc";t==e.order&&e.sort=="asc"&&(o="desc");let g=(e.page-1)*e.pageSize,f=e.pageSize;e.order=t,e.sort=o,l("do-search",g,f,t,o),e.isCheckAll?e.isCheckAll=!1:a.hasCheckbox&&D()},O=(t,o)=>{e.isCheckAll=!1;let g=e.order,f=e.sort,h=(t-1)*e.pageSize,N=e.pageSize;(!a.isReSearch||t>1||t==o)&&l("do-search",h,N,g,f)};P(()=>e.page,O),P(()=>a.page,t=>{t<=1?(e.page=1,l("get-now-page",e.page)):t>=e.maxPage?(e.page=e.maxPage,l("get-now-page",e.page)):e.page=t}),P(()=>e.pageSize,()=>{e.page===1?O(e.page,e.page):(e.page=1,e.isCheckAll=!1)});const _=()=>{if(e.page==1)return!1;e.page--},$=t=>{e.page=t},j=()=>{if(e.page>=e.maxPage)return!1;e.page++};P(()=>a.rows,()=>{(a.isReSearch||a.isStaticMode)&&(e.page=1),T(function(){a.isStaticMode||L()})});const F=(t,...o)=>t.replace(/{(\d+)}/g,function(g,f){return typeof o[f]<"u"?o[f]:g}),L=()=>{if(v.value){let t=v.value.getElementsByClassName("is-rows-el");l("is-finished",t)}l("get-now-page",e.page)};return U(()=>{T(()=>{a.rows.length>0&&L()})}),a.hasCheckbox?{slots:y,localTable:v,localRows:d,setting:e,rowCheckbox:r,checked:w,doSort:B,prevPage:_,movePage:$,nextPage:j,stringFormat:F}:{slots:y,localTable:v,localRows:d,setting:e,doSort:B,prevPage:_,movePage:$,nextPage:j,stringFormat:F}}}),Y={class:"card"},Z={key:0,class:"vtl-title card-header"},x={class:"card-body"},ee={id:"dataTables-example_wrapper",class:"dataTables_wrapper dt-bootstrap4 no-footer"},ae={class:"row"},te={class:"col-sm-12"},se={key:0,class:"loading-mask"},le={class:"vtl-table table table-hover table-bordered table-responsive-sm",id:"dataTables-example",ref:"localTable"},ie={class:"vtl-thead thead-dark"},ne={class:"vtl-thead-tr"},oe={key:0,class:"vtl-thead-th checkbox-th"},re=["onClick"],ge={key:0,class:"vtl-tbody"},de={key:0,class:"vtl-tbody-td"},pe=["value"],ue=["innerHTML"],ce={key:0},ve={key:1},fe={key:0,class:"vtl-tbody-td"},he=["value"],ke=["innerHTML"],be={key:1},me={key:0},ye={key:1},Se={key:0,class:"vtl-paging row"},Ce={class:"vtl-paging-info col-sm-12 col-md-4"},we={role:"status","aria-live":"polite"},Pe={class:"vtl-paging-change-div col-sm-12 col-md-4"},ze={class:"vtl-paging-count-label"},Ne=["value"],Me={class:"vtl-paging-page-label"},Le=["value"],Te={class:"vtl-paging-pagination-div col-sm-12 col-md-4"},Ae={class:"dataTables_paginate paging_simple_numbers",id:"dataTables-example_paginate"},Be={class:"vtl-paging-pagination-ul pagination"},Oe=["onClick"],_e={key:1,class:"row"},$e={class:"vtl-empty-msg col-sm-12 text-center"};function je(a,l,y,v,S,c){return i(),n("div",Y,[a.title?(i(),n("div",Z,p(a.title),1)):m("",!0),s("div",x,[l[16]||(l[16]=s("p",{class:"card-title"},null,-1)),s("div",ee,[l[15]||(l[15]=s("div",{class:"row"},null,-1)),s("div",ae,[s("div",te,[l[10]||(l[10]=s("div",{class:"row"},null,-1)),a.isLoading?(i(),n("div",se,l[9]||(l[9]=[s("div",{class:"loading-content"},[s("span",{style:{color:"white"}},"Loading...")],-1)]))):m("",!0),s("table",le,[s("thead",ie,[s("tr",ne,[a.hasCheckbox?(i(),n("th",oe,[s("div",null,[M(s("input",{type:"checkbox",class:"vtl-thead-checkbox","onUpdate:modelValue":l[0]||(l[0]=e=>a.setting.isCheckAll=e)},null,512),[[G,a.setting.isCheckAll]])])])):m("",!0),(i(!0),n(u,null,b(a.columns,(e,d)=>(i(),n("th",{class:"vtl-thead-th",key:d,style:J({width:e.width?e.width:"auto"})},[s("div",{class:C(["vtl-thead-column",{sortable:e.sortable,both:e.sortable,asc:a.setting.order===e.field&&a.setting.sort==="asc",desc:a.setting.order===e.field&&a.setting.sort==="desc"}]),onClick:r=>e.sortable?a.doSort(e.field):!1},p(e.label),11,re)],4))),128))])]),a.rows.length>0?(i(),n("tbody",ge,[a.isStaticMode?(i(!0),n(u,{key:0},b(a.localRows,(e,d)=>(i(),n("tr",{key:d,class:"vtl-tbody-tr"},[a.hasCheckbox?(i(),n("td",de,[s("div",null,[s("input",{type:"checkbox",class:"vtl-tbody-checkbox",ref_for:!0,ref:r=>{a.rowCheckbox[d]=r},value:e[a.setting.keyColumn],onClick:l[1]||(l[1]=(...r)=>a.checked&&a.checked(...r))},null,8,pe)])])):m("",!0),(i(!0),n(u,null,b(a.columns,(r,w)=>(i(),n("td",{key:w,class:"vtl-tbody-td"},[r.display?(i(),n("div",{key:0,innerHTML:r.display(e)},null,8,ue)):(i(),n(u,{key:1},[a.setting.isSlotMode&&a.slots[r.field]?(i(),n("div",ce,[E(a.$slots,r.field,{value:e},void 0,!0)])):(i(),n("span",ve,p(e[r.field]),1))],64))]))),128))]))),128)):(i(!0),n(u,{key:1},b(a.rows,(e,d)=>(i(),n("tr",{key:d,class:"vtl-tbody-tr"},[a.hasCheckbox?(i(),n("td",fe,[s("div",null,[s("input",{type:"checkbox",class:"vtl-tbody-checkbox",ref_for:!0,ref:r=>{a.rowCheckbox[d]=r},value:e[a.setting.keyColumn],onClick:l[2]||(l[2]=(...r)=>a.checked&&a.checked(...r))},null,8,he)])])):m("",!0),(i(!0),n(u,null,b(a.columns,(r,w)=>(i(),n("td",{key:w,class:"vtl-tbody-td"},[r.display?(i(),n("div",{key:0,innerHTML:r.display(e)},null,8,ke)):(i(),n("div",be,[a.setting.isSlotMode&&a.slots[r.field]?(i(),n("div",me,[E(a.$slots,r.field,{value:e},void 0,!0)])):(i(),n("span",ye,p(e[r.field]),1))]))]))),128))]))),128))])):m("",!0)],512)])]),a.rows.length>0?(i(),n("div",Se,[a.setting.isHidePaging?m("",!0):(i(),n(u,{key:0},[s("div",Ce,[s("div",we,p(a.stringFormat(a.messages.pagingInfo,a.setting.offset,a.setting.limit,a.total)),1)]),s("div",Pe,[s("span",ze,p(a.messages.pageSizeChangeLabel),1),M(s("select",{class:"vtl-paging-count-dropdown","onUpdate:modelValue":l[3]||(l[3]=e=>a.setting.pageSize=e)},[(i(!0),n(u,null,b(a.pageOptions,e=>(i(),n("option",{value:e.value,key:e.value},p(e.text),9,Ne))),128))],512),[[q,a.setting.pageSize]]),s("span",Me,p(a.messages.gotoPageLabel),1),M(s("select",{class:"vtl-paging-page-dropdown","onUpdate:modelValue":l[4]||(l[4]=e=>a.setting.page=e)},[(i(!0),n(u,null,b(a.setting.maxPage,e=>(i(),n("option",{key:e,value:parseInt(e)},p(e),9,Le))),128))],512),[[q,a.setting.page]])]),s("div",Te,[s("div",Ae,[s("ul",Be,[s("li",{class:C(["vtl-paging-pagination-page-li vtl-paging-pagination-page-li-first page-item",{disabled:a.setting.page<=1}])},[s("a",{class:"vtl-paging-pagination-page-link vtl-paging-pagination-page-link-first page-link",href:"javascript:void(0)","aria-label":"Previous",onClick:l[5]||(l[5]=e=>a.setting.page=1)},l[11]||(l[11]=[s("span",{"aria-hidden":"true"},"«",-1),s("span",{class:"sr-only"},"First",-1)]))],2),s("li",{class:C(["vtl-paging-pagination-page-li vtl-paging-pagination-page-li-prev page-item",{disabled:a.setting.page<=1}])},[s("a",{class:"vtl-paging-pagination-page-link vtl-paging-pagination-page-link-prev page-link",href:"javascript:void(0)","aria-label":"Previous",onClick:l[6]||(l[6]=(...e)=>a.prevPage&&a.prevPage(...e))},l[12]||(l[12]=[s("span",{"aria-hidden":"true"},"<",-1),s("span",{class:"sr-only"},"Prev",-1)]))],2),(i(!0),n(u,null,b(a.setting.paging,e=>(i(),n("li",{class:C(["vtl-paging-pagination-page-li vtl-paging-pagination-page-li-number page-item",{disabled:a.setting.page===e}]),key:e},[s("a",{class:"vtl-paging-pagination-page-link vtl-paging-pagination-page-link-number page-link",href:"javascript:void(0)",onClick:d=>a.movePage(e)},p(e),9,Oe)],2))),128)),s("li",{class:C(["vtl-paging-pagination-page-li vtl-paging-pagination-page-li-next page-item",{disabled:a.setting.page>=a.setting.maxPage}])},[s("a",{class:"vtl-paging-pagination-page-link vtl-paging-pagination-page-link-next page-link",href:"javascript:void(0)","aria-label":"Next",onClick:l[7]||(l[7]=(...e)=>a.nextPage&&a.nextPage(...e))},l[13]||(l[13]=[s("span",{"aria-hidden":"true"},">",-1),s("span",{class:"sr-only"},"Next",-1)]))],2),s("li",{class:C(["vtl-paging-pagination-page-li vtl-paging-pagination-page-li-last page-item",{disabled:a.setting.page>=a.setting.maxPage}])},[s("a",{class:"vtl-paging-pagination-page-link vtl-paging-pagination-page-link-last page-link",href:"javascript:void(0)","aria-label":"Next",onClick:l[8]||(l[8]=e=>a.setting.page=a.setting.maxPage)},l[14]||(l[14]=[s("span",{"aria-hidden":"true"},"»",-1),s("span",{class:"sr-only"},"Last",-1)]))],2)])])])],64))])):(i(),n("div",_e,[s("div",$e,p(a.messages.noDataAvailable),1)]))])])])}const Fe=I(X,[["render",je],["__scopeId","data-v-6e4a3e27"]]),Ee={key:0,style:{"text-align":"left"}},qe=A({__name:"NonSequentialFramesTable",props:{nkaSysNumber:{}},setup(a){const l=a,y=!!l.nkaSysNumber,v=z(y?l.nkaSysNumber:""),S=Q({url:"/tk_not_sequential"}),c=R({columns:[{label:"№ КА",field:"nkaSysNumber",width:"3%",sortable:!0,isKey:!0},{label:"t_k",field:"tK",width:"10%",sortable:!0},{label:"diff",field:"diff",width:"15%",sortable:!0}],rows:k(()=>{var e;return(e=S.data)==null?void 0:e.filter(d=>d.nkaSysNumber.toString().includes(v.value.toString()))}),totalRecordCount:k(()=>{var e;return(e=c.rows)==null?void 0:e.length}),sortable:{order:"nkaSysNumber",sort:"asc"},messages:{pagingInfo:"Показано {0}-{1} из {2}",pageSizeChangeLabel:"Показывать строк:",gotoPageLabel:"Перейти на страницу:",noDataAvailable:"Нет соответствующих данных"}});return(e,d)=>(i(),n(u,null,[y?m("",!0):(i(),n("div",Ee,[d[1]||(d[1]=s("label",null,"Поиск по № КА:",-1)),M(s("input",{"onUpdate:modelValue":d[0]||(d[0]=r=>v.value=r)},null,512),[[W,v.value]])])),V(H(Fe),{"is-static-mode":!0,"is-loading":H(S).loading,columns:c.columns,rows:c.rows,total:c.totalRecordCount,sortable:c.sortable,messages:c.messages},null,8,["is-loading","columns","rows","total","sortable","messages"])],64))}}),He=I(qe,[["__scopeId","data-v-8a5ffab6"]]),Ve=A({__name:"NonSequentialFrames",setup(a){return(l,y)=>(i(),n("div",null,[V(He,{"nka-sys-number":""})]))}});export{Ve as default};
