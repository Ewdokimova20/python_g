import{B as U,r as lt,K as jt,d as qt,o as Qt,c as Jt,l as V,e as N,a4 as te,u as F,b as J,m as tt,_ as ee}from"./index-B9ncFhZ9.js";import{_ as C,T as $,K as ae,M as re,u as zt,s as oe,j as ie,q as Vt,Q as ne,aq as se,o as dt,v as le,w as ue,y as he,n as Zt,ar as ft,O as ce,G as H,t as pe,as as de,at as fe,m as Et,a0 as vt,au as ve,c as ge,b as me,av as ye,P as _e,C as xe,ai as K,aw as Se,ax as be,ay as Me,az as b,aA as we,a2 as Bt,aB as gt,aC as j,aD as Ae,i as Nt,a5 as O,a3 as kt,af as mt,e as M,aE as De,aF as ut,X as Ie,a8 as Ce,aG as w,aH as Re,aI as Te,aJ as Le,aK as G,d as Wt,$ as Pe,aL as Gt,D as yt,aM as Oe,aN as ze,aO as Ve,aP as Ze,ag as _t,aQ as Ee,aR as Be,aS as Ne,R as Y,aT as ke,aU as We,aV as xt,a as Ge,aW as He,aX as Fe,aY as Ye,ah as Xe,ak as Ue,al as $e,am as Ke,an as je,ap as qe,aj as Qe}from"./tooltip-dMyvHWD1.js";import{_ as Je}from"./BisSelectMenu.vue_vue_type_script_setup_true_lang-D_52kiR4.js";import{u as ta}from"./NavSolution-CE9UZOOa.js";import"./useSelectedBisState-BJ3N0Krx.js";import"./setItemToLS-BDlwVMSR.js";import"./useSessionStorage-BONWqHvJ.js";var ea=function(s){C(a,s);function a(t,e,r,o){var i=s.call(this)||this;return i.updateData(t,e,r,o),i}return a.prototype._createSymbol=function(t,e,r,o,i){this.removeAll();var n=$(t,-1,-1,2,2,null,i);n.attr({z2:100,culling:!0,scaleX:o[0]/2,scaleY:o[1]/2}),n.drift=aa,this._symbolType=t,this.add(n)},a.prototype.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(null,t)},a.prototype.getSymbolType=function(){return this._symbolType},a.prototype.getSymbolPath=function(){return this.childAt(0)},a.prototype.highlight=function(){ae(this.childAt(0))},a.prototype.downplay=function(){re(this.childAt(0))},a.prototype.setZ=function(t,e){var r=this.childAt(0);r.zlevel=t,r.z=e},a.prototype.setDraggable=function(t,e){var r=this.childAt(0);r.draggable=t,r.cursor=!e&&t?"move":r.cursor},a.prototype.updateData=function(t,e,r,o){this.silent=!1;var i=t.getItemVisual(e,"symbol")||"circle",n=t.hostModel,l=a.getSymbolSize(t,e),u=i!==this._symbolType,h=o&&o.disableAnimation;if(u){var c=t.getItemVisual(e,"symbolKeepAspect");this._createSymbol(i,t,e,l,c)}else{var f=this.childAt(0);f.silent=!1;var p={scaleX:l[0]/2,scaleY:l[1]/2};h?f.attr(p):zt(f,p,n,e),oe(f)}if(this._updateCommon(t,e,l,r,o),u){var f=this.childAt(0);if(!h){var p={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:f.style.opacity}};f.scaleX=f.scaleY=0,f.style.opacity=0,ie(f,p,n,e)}}h&&this.childAt(0).stopAnimation("leave")},a.prototype._updateCommon=function(t,e,r,o,i){var n=this.childAt(0),l=t.hostModel,u,h,c,f,p,d,v,g,y;if(o&&(u=o.emphasisItemStyle,h=o.blurItemStyle,c=o.selectItemStyle,f=o.focus,p=o.blurScope,v=o.labelStatesModels,g=o.hoverScale,y=o.cursorStyle,d=o.emphasisDisabled),!o||t.hasItemOption){var m=o&&o.itemModel?o.itemModel:t.getItemModel(e),S=m.getModel("emphasis");u=S.getModel("itemStyle").getItemStyle(),c=m.getModel(["select","itemStyle"]).getItemStyle(),h=m.getModel(["blur","itemStyle"]).getItemStyle(),f=S.get("focus"),p=S.get("blurScope"),d=S.get("disabled"),v=Vt(m),g=S.getShallow("scale"),y=m.getShallow("cursor")}var x=t.getItemVisual(e,"symbolRotate");n.attr("rotation",(x||0)*Math.PI/180||0);var _=ne(t.getItemVisual(e,"symbolOffset"),r);_&&(n.x=_[0],n.y=_[1]),y&&n.attr("cursor",y);var D=t.getItemVisual(e,"style"),L=D.fill;if(n instanceof se){var I=n.style;n.useStyle(dt({image:I.image,x:I.x,y:I.y,width:I.width,height:I.height},D))}else n.__isEmptyBrush?n.useStyle(dt({},D)):n.useStyle(D),n.style.decal=null,n.setColor(L,i&&i.symbolInnerColor),n.style.strokeNoScale=!0;var A=t.getItemVisual(e,"liftZ"),T=this._z2;A!=null?T==null&&(this._z2=n.z2,n.z2+=A):T!=null&&(n.z2=T,this._z2=null);var R=i&&i.useNameLabel;le(n,v,{labelFetcher:l,labelDataIndex:e,defaultText:z,inheritColor:L,defaultOpacity:D.opacity});function z(pt){return R?t.getName(pt):ue(t,pt)}this._sizeX=r[0]/2,this._sizeY=r[1]/2;var B=n.ensureState("emphasis");B.style=u,n.ensureState("select").style=c,n.ensureState("blur").style=h;var ct=g==null||g===!0?Math.max(1.1,3/this._sizeY):isFinite(g)&&g>0?+g:1;B.scaleX=this._sizeX*ct,B.scaleY=this._sizeY*ct,this.setSymbolScale(1),he(this,f,p,d)},a.prototype.setSymbolScale=function(t){this.scaleX=this.scaleY=t},a.prototype.fadeOut=function(t,e,r){var o=this.childAt(0),i=Zt(this).dataIndex,n=r&&r.animation;if(this.silent=o.silent=!0,r&&r.fadeLabel){var l=o.getTextContent();l&&ft(l,{style:{opacity:0}},e,{dataIndex:i,removeOpt:n,cb:function(){o.removeTextContent()}})}else o.removeTextContent();ft(o,{style:{opacity:0},scaleX:0,scaleY:0},e,{dataIndex:i,cb:t,removeOpt:n})},a.getSymbolSize=function(t,e){return ce(t.getItemVisual(e,"symbolSize"))},a}(H);function aa(s,a){this.parent.drift(s,a)}function et(s,a,t,e){return a&&!isNaN(a[0])&&!isNaN(a[1])&&!(e.isIgnore&&e.isIgnore(t))&&!(e.clipShape&&!e.clipShape.contain(a[0],a[1]))&&s.getItemVisual(t,"symbol")!=="none"}function St(s){return s!=null&&!de(s)&&(s={isIgnore:s}),s||{}}function bt(s){var a=s.hostModel,t=a.getModel("emphasis");return{emphasisItemStyle:t.getModel("itemStyle").getItemStyle(),blurItemStyle:a.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:a.getModel(["select","itemStyle"]).getItemStyle(),focus:t.get("focus"),blurScope:t.get("blurScope"),emphasisDisabled:t.get("disabled"),hoverScale:t.get("scale"),labelStatesModels:Vt(a),cursorStyle:a.get("cursor")}}var ra=function(){function s(a){this.group=new H,this._SymbolCtor=a||ea}return s.prototype.updateData=function(a,t){this._progressiveEls=null,t=St(t);var e=this.group,r=a.hostModel,o=this._data,i=this._SymbolCtor,n=t.disableAnimation,l=bt(a),u={disableAnimation:n},h=t.getSymbolPoint||function(c){return a.getItemLayout(c)};o||e.removeAll(),a.diff(o).add(function(c){var f=h(c);if(et(a,f,c,t)){var p=new i(a,c,l,u);p.setPosition(f),a.setItemGraphicEl(c,p),e.add(p)}}).update(function(c,f){var p=o.getItemGraphicEl(f),d=h(c);if(!et(a,d,c,t)){e.remove(p);return}var v=a.getItemVisual(c,"symbol")||"circle",g=p&&p.getSymbolType&&p.getSymbolType();if(!p||g&&g!==v)e.remove(p),p=new i(a,c,l,u),p.setPosition(d);else{p.updateData(a,c,l,u);var y={x:d[0],y:d[1]};n?p.attr(y):zt(p,y,r)}e.add(p),a.setItemGraphicEl(c,p)}).remove(function(c){var f=o.getItemGraphicEl(c);f&&f.fadeOut(function(){e.remove(f)},r)}).execute(),this._getSymbolPoint=h,this._data=a},s.prototype.updateLayout=function(){var a=this,t=this._data;t&&t.eachItemGraphicEl(function(e,r){var o=a._getSymbolPoint(r);e.setPosition(o),e.markRedraw()})},s.prototype.incrementalPrepareUpdate=function(a){this._seriesScope=bt(a),this._data=null,this.group.removeAll()},s.prototype.incrementalUpdate=function(a,t,e){this._progressiveEls=[],e=St(e);function r(l){l.isGroup||(l.incremental=!0,l.ensureState("emphasis").hoverLayer=!0)}for(var o=a.start;o<a.end;o++){var i=t.getItemLayout(o);if(et(t,i,o,e)){var n=new this._SymbolCtor(t,o,this._seriesScope);n.traverse(r),n.setPosition(i),this.group.add(n),t.setItemGraphicEl(o,n),this._progressiveEls.push(n)}}},s.prototype.eachRendered=function(a){pe(this._progressiveEls||this.group,a)},s.prototype.remove=function(a){var t=this.group,e=this._data;e&&a?e.eachItemGraphicEl(function(r){r.fadeOut(function(){t.remove(r)},e.hostModel)}):t.removeAll()},s}();function Ht(s,a){return{seriesType:s,plan:fe(),reset:function(t){var e=t.getData(),r=t.coordinateSystem,o=t.pipelineContext,i=o.large;if(r){var n=Et(r.dimensions,function(p){return e.mapDimension(p)}).slice(0,2),l=n.length,u=e.getCalculationInfo("stackResultDimension");vt(e,n[0])&&(n[0]=u),vt(e,n[1])&&(n[1]=u);var h=e.getStore(),c=e.getDimensionIndex(n[0]),f=e.getDimensionIndex(n[1]);return l&&{progress:function(p,d){for(var v=p.end-p.start,g=i&&ve(v*l),y=[],m=[],S=p.start,x=0;S<p.end;S++){var _=void 0;if(l===1){var D=h.get(c,S);_=r.dataToPoint(D,null,m)}else y[0]=h.get(c,S),y[1]=h.get(f,S),_=r.dataToPoint(y,null,m);i?(g[x++]=_[0],g[x++]=_[1]):d.setItemLayout(S,_.slice())}i&&d.setLayout("points",g)}}}}}}var oa=function(s){C(a,s);function a(){var t=s!==null&&s.apply(this,arguments)||this;return t.type=a.type,t.hasSymbolVisual=!0,t}return a.prototype.getInitialData=function(t,e){return ge(null,this,{useEncodeDefaulter:!0})},a.prototype.getProgressive=function(){var t=this.option.progressive;return t??(this.option.large?5e3:this.get("progressive"))},a.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return t??(this.option.large?1e4:this.get("progressiveThreshold"))},a.prototype.brushSelector=function(t,e,r){return r.point(e.getItemLayout(t))},a.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},a.type="series.scatter",a.dependencies=["grid","polar","geo","singleAxis","calendar"],a.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},a}(me),Ft=4,ia=function(){function s(){}return s}(),na=function(s){C(a,s);function a(t){var e=s.call(this,t)||this;return e._off=0,e.hoverDataIdx=-1,e}return a.prototype.getDefaultShape=function(){return new ia},a.prototype.reset=function(){this.notClear=!1,this._off=0},a.prototype.buildPath=function(t,e){var r=e.points,o=e.size,i=this.symbolProxy,n=i.shape,l=t.getContext?t.getContext():t,u=l&&o[0]<Ft,h=this.softClipShape,c;if(u){this._ctx=l;return}for(this._ctx=null,c=this._off;c<r.length;){var f=r[c++],p=r[c++];isNaN(f)||isNaN(p)||h&&!h.contain(f,p)||(n.x=f-o[0]/2,n.y=p-o[1]/2,n.width=o[0],n.height=o[1],i.buildPath(t,n,!0))}this.incremental&&(this._off=c,this.notClear=!0)},a.prototype.afterBrush=function(){var t=this.shape,e=t.points,r=t.size,o=this._ctx,i=this.softClipShape,n;if(o){for(n=this._off;n<e.length;){var l=e[n++],u=e[n++];isNaN(l)||isNaN(u)||i&&!i.contain(l,u)||o.fillRect(l-r[0]/2,u-r[1]/2,r[0],r[1])}this.incremental&&(this._off=n,this.notClear=!0)}},a.prototype.findDataIndex=function(t,e){for(var r=this.shape,o=r.points,i=r.size,n=Math.max(i[0],4),l=Math.max(i[1],4),u=o.length/2-1;u>=0;u--){var h=u*2,c=o[h]-n/2,f=o[h+1]-l/2;if(t>=c&&e>=f&&t<=c+n&&e<=f+l)return u}return-1},a.prototype.contain=function(t,e){var r=this.transformCoordToLocal(t,e),o=this.getBoundingRect();if(t=r[0],e=r[1],o.contain(t,e)){var i=this.hoverDataIdx=this.findDataIndex(t,e);return i>=0}return this.hoverDataIdx=-1,!1},a.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var e=this.shape,r=e.points,o=e.size,i=o[0],n=o[1],l=1/0,u=1/0,h=-1/0,c=-1/0,f=0;f<r.length;){var p=r[f++],d=r[f++];l=Math.min(p,l),h=Math.max(p,h),u=Math.min(d,u),c=Math.max(d,c)}t=this._rect=new ye(l-i/2,u-n/2,h-l+i,c-u+n)}return t},a}(_e),sa=function(){function s(){this.group=new H}return s.prototype.updateData=function(a,t){this._clear();var e=this._create();e.setShape({points:a.getLayout("points")}),this._setCommon(e,a,t)},s.prototype.updateLayout=function(a){var t=a.getLayout("points");this.group.eachChild(function(e){if(e.startIndex!=null){var r=(e.endIndex-e.startIndex)*2,o=e.startIndex*4*2;t=new Float32Array(t.buffer,o,r)}e.setShape("points",t),e.reset()})},s.prototype.incrementalPrepareUpdate=function(a){this._clear()},s.prototype.incrementalUpdate=function(a,t,e){var r=this._newAdded[0],o=t.getLayout("points"),i=r&&r.shape.points;if(i&&i.length<2e4){var n=i.length,l=new Float32Array(n+o.length);l.set(i),l.set(o,n),r.endIndex=a.end,r.setShape({points:l})}else{this._newAdded=[];var u=this._create();u.startIndex=a.start,u.endIndex=a.end,u.incremental=!0,u.setShape({points:o}),this._setCommon(u,t,e)}},s.prototype.eachRendered=function(a){this._newAdded[0]&&a(this._newAdded[0])},s.prototype._create=function(){var a=new na({cursor:"default"});return a.ignoreCoarsePointer=!0,this.group.add(a),this._newAdded.push(a),a},s.prototype._setCommon=function(a,t,e){var r=t.hostModel;e=e||{};var o=t.getVisual("symbolSize");a.setShape("size",o instanceof Array?o:[o,o]),a.softClipShape=e.clipShape||null,a.symbolProxy=$(t.getVisual("symbol"),0,0,0,0),a.setColor=a.symbolProxy.setColor;var i=a.shape.size[0]<Ft;a.useStyle(r.getModel("itemStyle").getItemStyle(i?["color","shadowBlur","shadowColor"]:["color"]));var n=t.getVisual("style"),l=n&&n.fill;l&&a.setColor(l);var u=Zt(a);u.seriesIndex=r.seriesIndex,a.on("mousemove",function(h){u.dataIndex=null;var c=a.hoverDataIdx;c>=0&&(u.dataIndex=c+(a.startIndex||0))})},s.prototype.remove=function(){this._clear()},s.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},s}(),la=function(s){C(a,s);function a(){var t=s!==null&&s.apply(this,arguments)||this;return t.type=a.type,t}return a.prototype.render=function(t,e,r){var o=t.getData(),i=this._updateSymbolDraw(o,t);i.updateData(o,{clipShape:this._getClipShape(t)}),this._finished=!0},a.prototype.incrementalPrepareRender=function(t,e,r){var o=t.getData(),i=this._updateSymbolDraw(o,t);i.incrementalPrepareUpdate(o),this._finished=!1},a.prototype.incrementalRender=function(t,e,r){this._symbolDraw.incrementalUpdate(t,e.getData(),{clipShape:this._getClipShape(e)}),this._finished=t.end===e.getData().count()},a.prototype.updateTransform=function(t,e,r){var o=t.getData();if(this.group.dirty(),!this._finished||o.count()>1e4)return{update:!0};var i=Ht("").reset(t,e,r);i.progress&&i.progress({start:0,end:o.count(),count:o.count()},o),this._symbolDraw.updateLayout(o)},a.prototype.eachRendered=function(t){this._symbolDraw&&this._symbolDraw.eachRendered(t)},a.prototype._getClipShape=function(t){if(t.get("clip",!0)){var e=t.coordinateSystem;return e&&e.getArea&&e.getArea(.1)}},a.prototype._updateSymbolDraw=function(t,e){var r=this._symbolDraw,o=e.pipelineContext,i=o.large;return(!r||i!==this._isLargeDraw)&&(r&&r.remove(),r=this._symbolDraw=i?new sa:new ra,this._isLargeDraw=i,this.group.removeAll()),this.group.add(r.group),r},a.prototype.remove=function(t,e){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},a.prototype.dispose=function(){},a.type="scatter",a}(xe);function ua(s){K(Se),s.registerSeriesModel(oa),s.registerChartView(la),s.registerLayout(Ht("scatter"))}var Mt="\0_ec_interaction_mutex";function wt(s,a){return!!ha(s)[a]}function ha(s){return s[Mt]||(s[Mt]={})}be({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},Me);var ca=function(s){C(a,s);function a(t){var e=s.call(this)||this;e._zr=t;var r=b(e._mousedownHandler,e),o=b(e._mousemoveHandler,e),i=b(e._mouseupHandler,e),n=b(e._mousewheelHandler,e),l=b(e._pinchHandler,e);return e.enable=function(u,h){this.disable(),this._opt=we(Bt(h)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),u==null&&(u=!0),(u===!0||u==="move"||u==="pan")&&(t.on("mousedown",r),t.on("mousemove",o),t.on("mouseup",i)),(u===!0||u==="scale"||u==="zoom")&&(t.on("mousewheel",n),t.on("pinch",l))},e.disable=function(){t.off("mousedown",r),t.off("mousemove",o),t.off("mouseup",i),t.off("mousewheel",n),t.off("pinch",l)},e}return a.prototype.isDragging=function(){return this._dragging},a.prototype.isPinching=function(){return this._pinching},a.prototype.setPointerChecker=function(t){this.pointerChecker=t},a.prototype.dispose=function(){this.disable()},a.prototype._mousedownHandler=function(t){if(!gt(t)){for(var e=t.target;e;){if(e.draggable)return;e=e.__hostTarget||e.parent}var r=t.offsetX,o=t.offsetY;this.pointerChecker&&this.pointerChecker(t,r,o)&&(this._x=r,this._y=o,this._dragging=!0)}},a.prototype._mousemoveHandler=function(t){if(!(!this._dragging||!X("moveOnMouseMove",t,this._opt)||t.gestureEvent==="pinch"||wt(this._zr,"globalPan"))){var e=t.offsetX,r=t.offsetY,o=this._x,i=this._y,n=e-o,l=r-i;this._x=e,this._y=r,this._opt.preventDefaultMouseMove&&j(t.event),Yt(this,"pan","moveOnMouseMove",t,{dx:n,dy:l,oldX:o,oldY:i,newX:e,newY:r,isAvailableBehavior:null})}},a.prototype._mouseupHandler=function(t){gt(t)||(this._dragging=!1)},a.prototype._mousewheelHandler=function(t){var e=X("zoomOnMouseWheel",t,this._opt),r=X("moveOnMouseWheel",t,this._opt),o=t.wheelDelta,i=Math.abs(o),n=t.offsetX,l=t.offsetY;if(!(o===0||!e&&!r)){if(e){var u=i>3?1.4:i>1?1.2:1.1,h=o>0?u:1/u;at(this,"zoom","zoomOnMouseWheel",t,{scale:h,originX:n,originY:l,isAvailableBehavior:null})}if(r){var c=Math.abs(o),f=(o>0?1:-1)*(c>3?.4:c>1?.15:.05);at(this,"scrollMove","moveOnMouseWheel",t,{scrollDelta:f,originX:n,originY:l,isAvailableBehavior:null})}}},a.prototype._pinchHandler=function(t){if(!wt(this._zr,"globalPan")){var e=t.pinchScale>1?1.1:1/1.1;at(this,"zoom",null,t,{scale:e,originX:t.pinchX,originY:t.pinchY,isAvailableBehavior:null})}},a}(Ae);function at(s,a,t,e,r){s.pointerChecker&&s.pointerChecker(e,r.originX,r.originY)&&(j(e.event),Yt(s,a,t,e,r))}function Yt(s,a,t,e,r){r.isAvailableBehavior=b(X,null,t,e),s.trigger(a,r)}function X(s,a,t){var e=t[s];return!s||e&&(!Nt(e)||a.event[e+"Key"])}function Q(s,a,t,e,r,o){s=s||0;var i=t[1]-t[0];if(r!=null&&(r=Z(r,[0,i])),o!=null&&(o=Math.max(o,r??0)),e==="all"){var n=Math.abs(a[1]-a[0]);n=Z(n,[0,i]),r=o=Z(n,[r,o]),e=0}a[0]=Z(a[0],t),a[1]=Z(a[1],t);var l=rt(a,e);a[e]+=s;var u=r||0,h=t.slice();l.sign<0?h[0]+=u:h[1]-=u,a[e]=Z(a[e],h);var c;return c=rt(a,e),r!=null&&(c.sign!==l.sign||c.span<r)&&(a[1-e]=a[e]+l.sign*r),c=rt(a,e),o!=null&&c.span>o&&(a[1-e]=a[e]+c.sign*o),a}function rt(s,a){var t=s[a]-s[1-a];return{span:Math.abs(t),sign:t>0?-1:t<0?1:a?-1:1}}function Z(s,a){return Math.min(a[1]!=null?a[1]:1/0,Math.max(a[0]!=null?a[0]:-1/0,s))}var At=["x","y","radius","angle","single"],pa=["cartesian2d","polar","singleAxis"];function da(s){var a=s.get("coordinateSystem");return kt(pa,a)>=0}function P(s){return s+"Axis"}function fa(s,a){var t=O(),e=[],r=O();s.eachComponent({mainType:"dataZoom",query:a},function(h){r.get(h.uid)||n(h)});var o;do o=!1,s.eachComponent("dataZoom",i);while(o);function i(h){!r.get(h.uid)&&l(h)&&(n(h),o=!0)}function n(h){r.set(h.uid,!0),e.push(h),u(h)}function l(h){var c=!1;return h.eachTargetAxis(function(f,p){var d=t.get(f);d&&d[p]&&(c=!0)}),c}function u(h){h.eachTargetAxis(function(c,f){(t.get(c)||t.set(c,[]))[f]=!0})}return e}function Xt(s){var a=s.ecModel,t={infoList:[],infoMap:O()};return s.eachTargetAxis(function(e,r){var o=a.getComponent(P(e),r);if(o){var i=o.getCoordSysModel();if(i){var n=i.uid,l=t.infoMap.get(n);l||(l={model:i,axisModels:[]},t.infoList.push(l),t.infoMap.set(n,l)),l.axisModels.push(o)}}}),t}var ot=function(){function s(){this.indexList=[],this.indexMap=[]}return s.prototype.add=function(a){this.indexMap[a]||(this.indexList.push(a),this.indexMap[a]=!0)},s}(),q=function(s){C(a,s);function a(){var t=s!==null&&s.apply(this,arguments)||this;return t.type=a.type,t._autoThrottle=!0,t._noTarget=!0,t._rangePropMode=["percent","percent"],t}return a.prototype.init=function(t,e,r){var o=Dt(t);this.settledOption=o,this.mergeDefaultAndTheme(t,r),this._doInit(o)},a.prototype.mergeOption=function(t){var e=Dt(t);mt(this.option,t,!0),mt(this.settledOption,e,!0),this._doInit(e)},a.prototype._doInit=function(t){var e=this.option;this._setDefaultThrottle(t),this._updateRangeUse(t);var r=this.settledOption;M([["start","startValue"],["end","endValue"]],function(o,i){this._rangePropMode[i]==="value"&&(e[o[0]]=r[o[0]]=null)},this),this._resetTarget()},a.prototype._resetTarget=function(){var t=this.get("orient",!0),e=this._targetAxisInfoMap=O(),r=this._fillSpecifiedTargetAxis(e);r?this._orient=t||this._makeAutoOrientByTargetAxis():(this._orient=t||"horizontal",this._fillAutoTargetAxisByOrient(e,this._orient)),this._noTarget=!0,e.each(function(o){o.indexList.length&&(this._noTarget=!1)},this)},a.prototype._fillSpecifiedTargetAxis=function(t){var e=!1;return M(At,function(r){var o=this.getReferringComponents(P(r),De);if(o.specified){e=!0;var i=new ot;M(o.models,function(n){i.add(n.componentIndex)}),t.set(r,i)}},this),e},a.prototype._fillAutoTargetAxisByOrient=function(t,e){var r=this.ecModel,o=!0;if(o){var i=e==="vertical"?"y":"x",n=r.findComponents({mainType:i+"Axis"});l(n,i)}if(o){var n=r.findComponents({mainType:"singleAxis",filter:function(h){return h.get("orient",!0)===e}});l(n,"single")}function l(u,h){var c=u[0];if(c){var f=new ot;if(f.add(c.componentIndex),t.set(h,f),o=!1,h==="x"||h==="y"){var p=c.getReferringComponents("grid",ut).models[0];p&&M(u,function(d){c.componentIndex!==d.componentIndex&&p===d.getReferringComponents("grid",ut).models[0]&&f.add(d.componentIndex)})}}}o&&M(At,function(u){if(o){var h=r.findComponents({mainType:P(u),filter:function(f){return f.get("type",!0)==="category"}});if(h[0]){var c=new ot;c.add(h[0].componentIndex),t.set(u,c),o=!1}}},this)},a.prototype._makeAutoOrientByTargetAxis=function(){var t;return this.eachTargetAxis(function(e){!t&&(t=e)},this),t==="y"?"vertical":"horizontal"},a.prototype._setDefaultThrottle=function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var e=this.ecModel.option;this.option.throttle=e.animation&&e.animationDurationUpdate>0?100:20}},a.prototype._updateRangeUse=function(t){var e=this._rangePropMode,r=this.get("rangeMode");M([["start","startValue"],["end","endValue"]],function(o,i){var n=t[o[0]]!=null,l=t[o[1]]!=null;n&&!l?e[i]="percent":!n&&l?e[i]="value":r?e[i]=r[i]:n&&(e[i]="percent")})},a.prototype.noTarget=function(){return this._noTarget},a.prototype.getFirstTargetAxisModel=function(){var t;return this.eachTargetAxis(function(e,r){t==null&&(t=this.ecModel.getComponent(P(e),r))},this),t},a.prototype.eachTargetAxis=function(t,e){this._targetAxisInfoMap.each(function(r,o){M(r.indexList,function(i){t.call(e,o,i)})})},a.prototype.getAxisProxy=function(t,e){var r=this.getAxisModel(t,e);if(r)return r.__dzAxisProxy},a.prototype.getAxisModel=function(t,e){var r=this._targetAxisInfoMap.get(t);if(r&&r.indexMap[e])return this.ecModel.getComponent(P(t),e)},a.prototype.setRawRange=function(t){var e=this.option,r=this.settledOption;M([["start","startValue"],["end","endValue"]],function(o){(t[o[0]]!=null||t[o[1]]!=null)&&(e[o[0]]=r[o[0]]=t[o[0]],e[o[1]]=r[o[1]]=t[o[1]])},this),this._updateRangeUse(t)},a.prototype.setCalculatedRange=function(t){var e=this.option;M(["start","startValue","end","endValue"],function(r){e[r]=t[r]})},a.prototype.getPercentRange=function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},a.prototype.getValueRange=function(t,e){if(t==null&&e==null){var r=this.findRepresentativeAxisProxy();if(r)return r.getDataValueWindow()}else return this.getAxisProxy(t,e).getDataValueWindow()},a.prototype.findRepresentativeAxisProxy=function(t){if(t)return t.__dzAxisProxy;for(var e,r=this._targetAxisInfoMap.keys(),o=0;o<r.length;o++)for(var i=r[o],n=this._targetAxisInfoMap.get(i),l=0;l<n.indexList.length;l++){var u=this.getAxisProxy(i,n.indexList[l]);if(u.hostedBy(this))return u;e||(e=u)}return e},a.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},a.prototype.getOrient=function(){return this._orient},a.type="dataZoom",a.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],a.defaultOption={z:4,filterMode:"filter",start:0,end:100},a}(Ie);function Dt(s){var a={};return M(["start","end","startValue","endValue","throttle"],function(t){s.hasOwnProperty(t)&&(a[t]=s[t])}),a}var Ut=function(s){C(a,s);function a(){var t=s!==null&&s.apply(this,arguments)||this;return t.type=a.type,t}return a.prototype.render=function(t,e,r,o){this.dataZoomModel=t,this.ecModel=e,this.api=r},a.type="dataZoom",a}(Ce),E=M,It=G,va=function(){function s(a,t,e,r){this._dimName=a,this._axisIndex=t,this.ecModel=r,this._dataZoomModel=e}return s.prototype.hostedBy=function(a){return this._dataZoomModel===a},s.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},s.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},s.prototype.getTargetSeriesModels=function(){var a=[];return this.ecModel.eachSeries(function(t){if(da(t)){var e=P(this._dimName),r=t.getReferringComponents(e,ut).models[0];r&&this._axisIndex===r.componentIndex&&a.push(t)}},this),a},s.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},s.prototype.getMinMaxSpan=function(){return Bt(this._minMaxSpan)},s.prototype.calculateDataWindow=function(a){var t=this._dataExtent,e=this.getAxisModel(),r=e.axis.scale,o=this._dataZoomModel.getRangePropMode(),i=[0,100],n=[],l=[],u;E(["start","end"],function(f,p){var d=a[f],v=a[f+"Value"];o[p]==="percent"?(d==null&&(d=i[p]),v=r.parse(w(d,i,t))):(u=!0,v=v==null?t[p]:r.parse(v),d=w(v,t,i)),l[p]=v==null||isNaN(v)?t[p]:v,n[p]=d==null||isNaN(d)?i[p]:d}),It(l),It(n);var h=this._minMaxSpan;u?c(l,n,t,i,!1):c(n,l,i,t,!0);function c(f,p,d,v,g){var y=g?"Span":"ValueSpan";Q(0,f,d,"all",h["min"+y],h["max"+y]);for(var m=0;m<2;m++)p[m]=w(f[m],d,v,!0),g&&(p[m]=r.parse(p[m]))}return{valueWindow:l,percentWindow:n}},s.prototype.reset=function(a){if(a===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=ga(this,this._dimName,t),this._updateMinMaxSpan();var e=this.calculateDataWindow(a.settledOption);this._valueWindow=e.valueWindow,this._percentWindow=e.percentWindow,this._setAxisModel()}},s.prototype.filterData=function(a,t){if(a!==this._dataZoomModel)return;var e=this._dimName,r=this.getTargetSeriesModels(),o=a.get("filterMode"),i=this._valueWindow;if(o==="none")return;E(r,function(l){var u=l.getData(),h=u.mapDimensionsAll(e);if(h.length){if(o==="weakFilter"){var c=u.getStore(),f=Et(h,function(p){return u.getDimensionIndex(p)},u);u.filterSelf(function(p){for(var d,v,g,y=0;y<h.length;y++){var m=c.get(f[y],p),S=!isNaN(m),x=m<i[0],_=m>i[1];if(S&&!x&&!_)return!0;S&&(g=!0),x&&(d=!0),_&&(v=!0)}return g&&d&&v})}else E(h,function(p){if(o==="empty")l.setData(u=u.map(p,function(v){return n(v)?v:NaN}));else{var d={};d[p]=i,u.selectRange(d)}});E(h,function(p){u.setApproximateExtent(i,p)})}});function n(l){return l>=i[0]&&l<=i[1]}},s.prototype._updateMinMaxSpan=function(){var a=this._minMaxSpan={},t=this._dataZoomModel,e=this._dataExtent;E(["min","max"],function(r){var o=t.get(r+"Span"),i=t.get(r+"ValueSpan");i!=null&&(i=this.getAxisModel().axis.scale.parse(i)),i!=null?o=w(e[0]+i,e,[0,100],!0):o!=null&&(i=w(o,[0,100],e,!0)-e[0]),a[r+"Span"]=o,a[r+"ValueSpan"]=i},this)},s.prototype._setAxisModel=function(){var a=this.getAxisModel(),t=this._percentWindow,e=this._valueWindow;if(t){var r=Re(e,[0,500]);r=Math.min(r,20);var o=a.axis.scale.rawExtentInfo;t[0]!==0&&o.setDeterminedMinMax("min",+e[0].toFixed(r)),t[1]!==100&&o.setDeterminedMinMax("max",+e[1].toFixed(r)),o.freeze()}},s}();function ga(s,a,t){var e=[1/0,-1/0];E(t,function(i){Te(e,i.getData(),a)});var r=s.getAxisModel(),o=Le(r.axis.scale,r,e).calculate();return[o.min,o.max]}var ma={getTargetSeries:function(s){function a(r){s.eachComponent("dataZoom",function(o){o.eachTargetAxis(function(i,n){var l=s.getComponent(P(i),n);r(i,n,l,o)})})}a(function(r,o,i,n){i.__dzAxisProxy=null});var t=[];a(function(r,o,i,n){i.__dzAxisProxy||(i.__dzAxisProxy=new va(r,o,n,s),t.push(i.__dzAxisProxy))});var e=O();return M(t,function(r){M(r.getTargetSeriesModels(),function(o){e.set(o.uid,o)})}),e},overallReset:function(s,a){s.eachComponent("dataZoom",function(t){t.eachTargetAxis(function(e,r){t.getAxisProxy(e,r).reset(t)}),t.eachTargetAxis(function(e,r){t.getAxisProxy(e,r).filterData(t,a)})}),s.eachComponent("dataZoom",function(t){var e=t.findRepresentativeAxisProxy();if(e){var r=e.getDataPercentWindow(),o=e.getDataValueWindow();t.setCalculatedRange({start:r[0],end:r[1],startValue:o[0],endValue:o[1]})}})}};function ya(s){s.registerAction("dataZoom",function(a,t){var e=fa(t,a);M(e,function(r){r.setRawRange({start:a.start,end:a.end,startValue:a.startValue,endValue:a.endValue})})})}var Ct=!1;function $t(s){Ct||(Ct=!0,s.registerProcessor(s.PRIORITY.PROCESSOR.FILTER,ma),ya(s),s.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}var _a=function(s){C(a,s);function a(){var t=s!==null&&s.apply(this,arguments)||this;return t.type=a.type,t}return a.type="dataZoom.inside",a.defaultOption=Wt(q.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),a}(q),ht=Pe();function xa(s,a,t){ht(s).coordSysRecordMap.each(function(e){var r=e.dataZoomInfoMap.get(a.uid);r&&(r.getRange=t)})}function Sa(s,a){for(var t=ht(s).coordSysRecordMap,e=t.keys(),r=0;r<e.length;r++){var o=e[r],i=t.get(o),n=i.dataZoomInfoMap;if(n){var l=a.uid,u=n.get(l);u&&(n.removeKey(l),n.keys().length||Kt(t,i))}}}function Kt(s,a){if(a){s.removeKey(a.model.uid);var t=a.controller;t&&t.dispose()}}function ba(s,a){var t={model:a,containsPoint:yt(wa,a),dispatchAction:yt(Ma,s),dataZoomInfoMap:null,controller:null},e=t.controller=new ca(s.getZr());return M(["pan","zoom","scrollMove"],function(r){e.on(r,function(o){var i=[];t.dataZoomInfoMap.each(function(n){if(o.isAvailableBehavior(n.model.option)){var l=(n.getRange||{})[r],u=l&&l(n.dzReferCoordSysInfo,t.model.mainType,t.controller,o);!n.model.get("disabled",!0)&&u&&i.push({dataZoomId:n.model.id,start:u[0],end:u[1]})}}),i.length&&t.dispatchAction(i)})}),t}function Ma(s,a){s.isDisposed()||s.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:a})}function wa(s,a,t,e){return s.coordinateSystem.containPoint([t,e])}function Aa(s){var a,t="type_",e={type_true:2,type_move:1,type_false:0,type_undefined:-1},r=!0;return s.each(function(o){var i=o.model,n=i.get("disabled",!0)?!1:i.get("zoomLock",!0)?"move":!0;e[t+n]>e[t+a]&&(a=n),r=r&&i.get("preventDefaultMouseMove",!0)}),{controlType:a,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!r}}}function Da(s){s.registerProcessor(s.PRIORITY.PROCESSOR.FILTER,function(a,t){var e=ht(t),r=e.coordSysRecordMap||(e.coordSysRecordMap=O());r.each(function(o){o.dataZoomInfoMap=null}),a.eachComponent({mainType:"dataZoom",subType:"inside"},function(o){var i=Xt(o);M(i.infoList,function(n){var l=n.model.uid,u=r.get(l)||r.set(l,ba(t,n.model)),h=u.dataZoomInfoMap||(u.dataZoomInfoMap=O());h.set(o.uid,{dzReferCoordSysInfo:n,model:o,getRange:null})})}),r.each(function(o){var i=o.controller,n,l=o.dataZoomInfoMap;if(l){var u=l.keys()[0];u!=null&&(n=l.get(u))}if(!n){Kt(r,o);return}var h=Aa(l);i.enable(h.controlType,h.opt),i.setPointerChecker(o.containsPoint),Gt(o,"dispatchAction",n.model.get("throttle",!0),"fixRate")})})}var Ia=function(s){C(a,s);function a(){var t=s!==null&&s.apply(this,arguments)||this;return t.type="dataZoom.inside",t}return a.prototype.render=function(t,e,r){if(s.prototype.render.apply(this,arguments),t.noTarget()){this._clear();return}this.range=t.getPercentRange(),xa(r,t,{pan:b(it.pan,this),zoom:b(it.zoom,this),scrollMove:b(it.scrollMove,this)})},a.prototype.dispose=function(){this._clear(),s.prototype.dispose.apply(this,arguments)},a.prototype._clear=function(){Sa(this.api,this.dataZoomModel),this.range=null},a.type="dataZoom.inside",a}(Ut),it={zoom:function(s,a,t,e){var r=this.range,o=r.slice(),i=s.axisModels[0];if(i){var n=nt[a](null,[e.originX,e.originY],i,t,s),l=(n.signal>0?n.pixelStart+n.pixelLength-n.pixel:n.pixel-n.pixelStart)/n.pixelLength*(o[1]-o[0])+o[0],u=Math.max(1/e.scale,0);o[0]=(o[0]-l)*u+l,o[1]=(o[1]-l)*u+l;var h=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(Q(0,o,[0,100],0,h.minSpan,h.maxSpan),this.range=o,r[0]!==o[0]||r[1]!==o[1])return o}},pan:Rt(function(s,a,t,e,r,o){var i=nt[e]([o.oldX,o.oldY],[o.newX,o.newY],a,r,t);return i.signal*(s[1]-s[0])*i.pixel/i.pixelLength}),scrollMove:Rt(function(s,a,t,e,r,o){var i=nt[e]([0,0],[o.scrollDelta,o.scrollDelta],a,r,t);return i.signal*(s[1]-s[0])*o.scrollDelta})};function Rt(s){return function(a,t,e,r){var o=this.range,i=o.slice(),n=a.axisModels[0];if(n){var l=s(i,n,a,t,e,r);if(Q(l,i,[0,100],"all"),this.range=i,o[0]!==i[0]||o[1]!==i[1])return i}}}var nt={grid:function(s,a,t,e,r){var o=t.axis,i={},n=r.model.coordinateSystem.getRect();return s=s||[0,0],o.dim==="x"?(i.pixel=a[0]-s[0],i.pixelLength=n.width,i.pixelStart=n.x,i.signal=o.inverse?1:-1):(i.pixel=a[1]-s[1],i.pixelLength=n.height,i.pixelStart=n.y,i.signal=o.inverse?-1:1),i},polar:function(s,a,t,e,r){var o=t.axis,i={},n=r.model.coordinateSystem,l=n.getRadiusAxis().getExtent(),u=n.getAngleAxis().getExtent();return s=s?n.pointToCoord(s):[0,0],a=n.pointToCoord(a),t.mainType==="radiusAxis"?(i.pixel=a[0]-s[0],i.pixelLength=l[1]-l[0],i.pixelStart=l[0],i.signal=o.inverse?1:-1):(i.pixel=a[1]-s[1],i.pixelLength=u[1]-u[0],i.pixelStart=u[0],i.signal=o.inverse?-1:1),i},singleAxis:function(s,a,t,e,r){var o=t.axis,i=r.model.coordinateSystem.getRect(),n={};return s=s||[0,0],o.orient==="horizontal"?(n.pixel=a[0]-s[0],n.pixelLength=i.width,n.pixelStart=i.x,n.signal=o.inverse?1:-1):(n.pixel=a[1]-s[1],n.pixelLength=i.height,n.pixelStart=i.y,n.signal=o.inverse?-1:1),n}};function Ca(s){$t(s),s.registerComponentModel(_a),s.registerComponentView(Ia),Da(s)}var Ra=function(s){C(a,s);function a(){var t=s!==null&&s.apply(this,arguments)||this;return t.type=a.type,t}return a.type="dataZoom.slider",a.layoutMode="box",a.defaultOption=Wt(q.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),a}(q),k=Y,Tt=7,Ta=1,st=30,La=7,W="horizontal",Lt="vertical",Pa=5,Oa=["line","bar","candlestick","scatter"],za={easing:"cubicOut",duration:100,delay:0},Va=function(s){C(a,s);function a(){var t=s!==null&&s.apply(this,arguments)||this;return t.type=a.type,t._displayables={},t}return a.prototype.init=function(t,e){this.api=e,this._onBrush=b(this._onBrush,this),this._onBrushEnd=b(this._onBrushEnd,this)},a.prototype.render=function(t,e,r,o){if(s.prototype.render.apply(this,arguments),Gt(this,"_dispatchZoomAction",t.get("throttle"),"fixRate"),this._orient=t.getOrient(),t.get("show")===!1){this.group.removeAll();return}if(t.noTarget()){this._clear(),this.group.removeAll();return}(!o||o.type!=="dataZoom"||o.from!==this.uid)&&this._buildView(),this._updateView()},a.prototype.dispose=function(){this._clear(),s.prototype.dispose.apply(this,arguments)},a.prototype._clear=function(){Oe(this,"_dispatchZoomAction");var t=this.api.getZr();t.off("mousemove",this._onBrush),t.off("mouseup",this._onBrushEnd)},a.prototype._buildView=function(){var t=this.group;t.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var e=this._displayables.sliderGroup=new H;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),t.add(e),this._positionGroup()},a.prototype._resetLocation=function(){var t=this.dataZoomModel,e=this.api,r=t.get("brushSelect"),o=r?La:0,i=this._findCoordRect(),n={width:e.getWidth(),height:e.getHeight()},l=this._orient===W?{right:n.width-i.x-i.width,top:n.height-st-Tt-o,width:i.width,height:st}:{right:Tt,top:i.y,width:st,height:i.height},u=ze(t.option);M(["right","top","width","height"],function(c){u[c]==="ph"&&(u[c]=l[c])});var h=Ve(u,n);this._location={x:h.x,y:h.y},this._size=[h.width,h.height],this._orient===Lt&&this._size.reverse()},a.prototype._positionGroup=function(){var t=this.group,e=this._location,r=this._orient,o=this.dataZoomModel.getFirstTargetAxisModel(),i=o&&o.get("inverse"),n=this._displayables.sliderGroup,l=(this._dataShadowInfo||{}).otherAxisInverse;n.attr(r===W&&!i?{scaleY:l?1:-1,scaleX:1}:r===W&&i?{scaleY:l?1:-1,scaleX:-1}:r===Lt&&!i?{scaleY:l?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:l?-1:1,scaleX:-1,rotation:Math.PI/2});var u=t.getBoundingRect([n]);t.x=e.x-u.x,t.y=e.y-u.y,t.markRedraw()},a.prototype._getViewExtent=function(){return[0,this._size[0]]},a.prototype._renderBackground=function(){var t=this.dataZoomModel,e=this._size,r=this._displayables.sliderGroup,o=t.get("brushSelect");r.add(new k({silent:!0,shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:t.get("backgroundColor")},z2:-40}));var i=new k({shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:"transparent"},z2:0,onclick:b(this._onClickPanel,this)}),n=this.api.getZr();o?(i.on("mousedown",this._onBrushStart,this),i.cursor="crosshair",n.on("mousemove",this._onBrush),n.on("mouseup",this._onBrushEnd)):(n.off("mousemove",this._onBrush),n.off("mouseup",this._onBrushEnd)),r.add(i)},a.prototype._renderDataShadow=function(){var t=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!t)return;var e=this._size,r=this._shadowSize||[],o=t.series,i=o.getRawData(),n=o.getShadowDim&&o.getShadowDim(),l=n&&i.getDimensionInfo(n)?o.getShadowDim():t.otherDim;if(l==null)return;var u=this._shadowPolygonPts,h=this._shadowPolylinePts;if(i!==this._shadowData||l!==this._shadowDim||e[0]!==r[0]||e[1]!==r[1]){var c=i.getDataExtent(l),f=(c[1]-c[0])*.3;c=[c[0]-f,c[1]+f];var p=[0,e[1]],d=[0,e[0]],v=[[e[0],0],[0,0]],g=[],y=d[1]/(i.count()-1),m=0,S=Math.round(i.count()/e[0]),x;i.each([l],function(A,T){if(S>0&&T%S){m+=y;return}var R=A==null||isNaN(A)||A==="",z=R?0:w(A,c,p,!0);R&&!x&&T?(v.push([v[v.length-1][0],0]),g.push([g[g.length-1][0],0])):!R&&x&&(v.push([m,0]),g.push([m,0])),v.push([m,z]),g.push([m,z]),m+=y,x=R}),u=this._shadowPolygonPts=v,h=this._shadowPolylinePts=g}this._shadowData=i,this._shadowDim=l,this._shadowSize=[e[0],e[1]];var _=this.dataZoomModel;function D(A){var T=_.getModel(A?"selectedDataBackground":"dataBackground"),R=new H,z=new Fe({shape:{points:u},segmentIgnoreThreshold:1,style:T.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),B=new Ye({shape:{points:h},segmentIgnoreThreshold:1,style:T.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return R.add(z),R.add(B),R}for(var L=0;L<3;L++){var I=D(L===1);this._displayables.sliderGroup.add(I),this._displayables.dataShadowSegs.push(I)}},a.prototype._prepareDataShadowInfo=function(){var t=this.dataZoomModel,e=t.get("showDataShadow");if(e!==!1){var r,o=this.ecModel;return t.eachTargetAxis(function(i,n){var l=t.getAxisProxy(i,n).getTargetSeriesModels();M(l,function(u){if(!r&&!(e!==!0&&kt(Oa,u.get("type"))<0)){var h=o.getComponent(P(i),n).axis,c=Za(i),f,p=u.coordinateSystem;c!=null&&p.getOtherAxis&&(f=p.getOtherAxis(h).inverse),c=u.getData().mapDimension(c),r={thisAxis:h,series:u,thisDim:i,otherDim:c,otherAxisInverse:f}}},this)},this),r}},a.prototype._renderHandle=function(){var t=this.group,e=this._displayables,r=e.handles=[null,null],o=e.handleLabels=[null,null],i=this._displayables.sliderGroup,n=this._size,l=this.dataZoomModel,u=this.api,h=l.get("borderRadius")||0,c=l.get("brushSelect"),f=e.filler=new k({silent:c,style:{fill:l.get("fillerColor")},textConfig:{position:"inside"}});i.add(f),i.add(new k({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:n[0],height:n[1],r:h},style:{stroke:l.get("dataBackgroundColor")||l.get("borderColor"),lineWidth:Ta,fill:"rgba(0,0,0,0)"}})),M([0,1],function(S){var x=l.get("handleIcon");!Ze[x]&&x.indexOf("path://")<0&&x.indexOf("image://")<0&&(x="path://"+x);var _=$(x,-1,0,2,2,null,!0);_.attr({cursor:Pt(this._orient),draggable:!0,drift:b(this._onDragMove,this,S),ondragend:b(this._onDragEnd,this),onmouseover:b(this._showDataInfo,this,!0),onmouseout:b(this._showDataInfo,this,!1),z2:5});var D=_.getBoundingRect(),L=l.get("handleSize");this._handleHeight=_t(L,this._size[1]),this._handleWidth=D.width/D.height*this._handleHeight,_.setStyle(l.getModel("handleStyle").getItemStyle()),_.style.strokeNoScale=!0,_.rectHover=!0,_.ensureState("emphasis").style=l.getModel(["emphasis","handleStyle"]).getItemStyle(),Ee(_);var I=l.get("handleColor");I!=null&&(_.style.fill=I),i.add(r[S]=_);var A=l.getModel("textStyle");t.add(o[S]=new Be({silent:!0,invisible:!0,style:Ne(A,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:A.getTextColor(),font:A.getFont()}),z2:10}))},this);var p=f;if(c){var d=_t(l.get("moveHandleSize"),n[1]),v=e.moveHandle=new Y({style:l.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:n[1]-.5,height:d}}),g=d*.8,y=e.moveHandleIcon=$(l.get("moveHandleIcon"),-g/2,-g/2,g,g,"#fff",!0);y.silent=!0,y.y=n[1]+d/2-.5,v.ensureState("emphasis").style=l.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var m=Math.min(n[1]/2,Math.max(d,10));p=e.moveZone=new Y({invisible:!0,shape:{y:n[1]-m,height:d+m}}),p.on("mouseover",function(){u.enterEmphasis(v)}).on("mouseout",function(){u.leaveEmphasis(v)}),i.add(v),i.add(y),i.add(p)}p.attr({draggable:!0,cursor:Pt(this._orient),drift:b(this._onDragMove,this,"all"),ondragstart:b(this._showDataInfo,this,!0),ondragend:b(this._onDragEnd,this),onmouseover:b(this._showDataInfo,this,!0),onmouseout:b(this._showDataInfo,this,!1)})},a.prototype._resetInterval=function(){var t=this._range=this.dataZoomModel.getPercentRange(),e=this._getViewExtent();this._handleEnds=[w(t[0],[0,100],e,!0),w(t[1],[0,100],e,!0)]},a.prototype._updateInterval=function(t,e){var r=this.dataZoomModel,o=this._handleEnds,i=this._getViewExtent(),n=r.findRepresentativeAxisProxy().getMinMaxSpan(),l=[0,100];Q(e,o,i,r.get("zoomLock")?"all":t,n.minSpan!=null?w(n.minSpan,l,i,!0):null,n.maxSpan!=null?w(n.maxSpan,l,i,!0):null);var u=this._range,h=this._range=G([w(o[0],i,l,!0),w(o[1],i,l,!0)]);return!u||u[0]!==h[0]||u[1]!==h[1]},a.prototype._updateView=function(t){var e=this._displayables,r=this._handleEnds,o=G(r.slice()),i=this._size;M([0,1],function(p){var d=e.handles[p],v=this._handleHeight;d.attr({scaleX:v/2,scaleY:v/2,x:r[p]+(p?-1:1),y:i[1]/2-v/2})},this),e.filler.setShape({x:o[0],y:0,width:o[1]-o[0],height:i[1]});var n={x:o[0],width:o[1]-o[0]};e.moveHandle&&(e.moveHandle.setShape(n),e.moveZone.setShape(n),e.moveZone.getBoundingRect(),e.moveHandleIcon&&e.moveHandleIcon.attr("x",n.x+n.width/2));for(var l=e.dataShadowSegs,u=[0,o[0],o[1],i[0]],h=0;h<l.length;h++){var c=l[h],f=c.getClipPath();f||(f=new Y,c.setClipPath(f)),f.setShape({x:u[h],y:0,width:u[h+1]-u[h],height:i[1]})}this._updateDataInfo(t)},a.prototype._updateDataInfo=function(t){var e=this.dataZoomModel,r=this._displayables,o=r.handleLabels,i=this._orient,n=["",""];if(e.get("showDetail")){var l=e.findRepresentativeAxisProxy();if(l){var u=l.getAxisModel().axis,h=this._range,c=t?l.calculateDataWindow({start:h[0],end:h[1]}).valueWindow:l.getDataValueWindow();n=[this._formatLabel(c[0],u),this._formatLabel(c[1],u)]}}var f=G(this._handleEnds.slice());p.call(this,0),p.call(this,1);function p(d){var v=ke(r.handles[d].parent,this.group),g=We(d===0?"right":"left",v),y=this._handleWidth/2+Pa,m=xt([f[d]+(d===0?-y:y),this._size[1]/2],v);o[d].setStyle({x:m[0],y:m[1],verticalAlign:i===W?"middle":g,align:i===W?g:"center",text:n[d]})}},a.prototype._formatLabel=function(t,e){var r=this.dataZoomModel,o=r.get("labelFormatter"),i=r.get("labelPrecision");(i==null||i==="auto")&&(i=e.getPixelPrecision());var n=t==null||isNaN(t)?"":e.type==="category"||e.type==="time"?e.scale.getLabel({value:Math.round(t)}):t.toFixed(Math.min(i,20));return Ge(o)?o(t,n):Nt(o)?o.replace("{value}",n):n},a.prototype._showDataInfo=function(t){t=this._dragging||t;var e=this._displayables,r=e.handleLabels;r[0].attr("invisible",!t),r[1].attr("invisible",!t),e.moveHandle&&this.api[t?"enterEmphasis":"leaveEmphasis"](e.moveHandle,1)},a.prototype._onDragMove=function(t,e,r,o){this._dragging=!0,j(o.event);var i=this._displayables.sliderGroup.getLocalTransform(),n=xt([e,r],i,!0),l=this._updateInterval(t,n[0]),u=this.dataZoomModel.get("realtime");this._updateView(!u),l&&u&&this._dispatchZoomAction(!0)},a.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var t=this.dataZoomModel.get("realtime");!t&&this._dispatchZoomAction(!1)},a.prototype._onClickPanel=function(t){var e=this._size,r=this._displayables.sliderGroup.transformCoordToLocal(t.offsetX,t.offsetY);if(!(r[0]<0||r[0]>e[0]||r[1]<0||r[1]>e[1])){var o=this._handleEnds,i=(o[0]+o[1])/2,n=this._updateInterval("all",r[0]-i);this._updateView(),n&&this._dispatchZoomAction(!1)}},a.prototype._onBrushStart=function(t){var e=t.offsetX,r=t.offsetY;this._brushStart=new He(e,r),this._brushing=!0,this._brushStartTime=+new Date},a.prototype._onBrushEnd=function(t){if(this._brushing){var e=this._displayables.brushRect;if(this._brushing=!1,!!e){e.attr("ignore",!0);var r=e.shape,o=+new Date;if(!(o-this._brushStartTime<200&&Math.abs(r.width)<5)){var i=this._getViewExtent(),n=[0,100];this._range=G([w(r.x,i,n,!0),w(r.x+r.width,i,n,!0)]),this._handleEnds=[r.x,r.x+r.width],this._updateView(),this._dispatchZoomAction(!1)}}}},a.prototype._onBrush=function(t){this._brushing&&(j(t.event),this._updateBrushRect(t.offsetX,t.offsetY))},a.prototype._updateBrushRect=function(t,e){var r=this._displayables,o=this.dataZoomModel,i=r.brushRect;i||(i=r.brushRect=new k({silent:!0,style:o.getModel("brushStyle").getItemStyle()}),r.sliderGroup.add(i)),i.attr("ignore",!1);var n=this._brushStart,l=this._displayables.sliderGroup,u=l.transformCoordToLocal(t,e),h=l.transformCoordToLocal(n.x,n.y),c=this._size;u[0]=Math.max(Math.min(c[0],u[0]),0),i.setShape({x:h[0],y:0,width:u[0]-h[0],height:c[1]})},a.prototype._dispatchZoomAction=function(t){var e=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:t?za:null,start:e[0],end:e[1]})},a.prototype._findCoordRect=function(){var t,e=Xt(this.dataZoomModel).infoList;if(!t&&e.length){var r=e[0].model.coordinateSystem;t=r.getRect&&r.getRect()}if(!t){var o=this.api.getWidth(),i=this.api.getHeight();t={x:o*.2,y:i*.2,width:o*.6,height:i*.6}}return t},a.type="dataZoom.slider",a}(Ut);function Za(s){var a={x:"y",y:"x",radius:"angle",angle:"radius"};return a[s]}function Pt(s){return s==="vertical"?"ns-resize":"ew-resize"}function Ea(s){s.registerComponentModel(Ra),s.registerComponentView(Va),$t(s)}function Ba(s){K(Ca),K(Ea)}const Na=()=>{const s=ta(),a=U(()=>s.data),t=lt(Xe());return U(()=>a.value?Object.entries(a.value).reduce((r,[o,i])=>{const n=Object.entries(i).map(([u,h])=>({name:jt(u),type:"scatter",data:[[h.e,h.n]],itemStyle:{color:t.value[Number(u)]},symbol:"circle",symbolSize:10})),l=20;return r[Number(o)]={series:n,maxValue:l},r},{}):{})},ka={class:"nav-solution-chart-container"},Wa={class:"relative"},Ga={class:"toolbar absolute flex flex-column"},Ot=.2,Ha=qt({__name:"NavSolutionPlanePlot",props:{enableLegend:{type:Boolean,default:!1},bis:{}},emits:["update:bis"],setup(s,{emit:a}){K([Ue,ua,$e,Ke,je,Ba]);const t=s,e=a,r={series:[],maxValue:1},o=Na(),i=U(()=>{var d;return((d=t.bis)==null?void 0:d.bisId)!=null&&o.value[t.bis.bisId]||r}),n=lt({textColor:getComputedStyle(document.documentElement).getPropertyValue("--text-color"),textColorSecondary:getComputedStyle(document.documentElement).getPropertyValue("--text-color-secondary"),surfaceBorder:getComputedStyle(document.documentElement).getPropertyValue("--surface-border")}),l=lt(null),u=()=>{var _;const d=(_=l.value)==null?void 0:_.chart;if(!d){console.log("Chart instance not found");return}const v=d.getOption(),g=Array.isArray(v.xAxis)?v.xAxis[0]:v.xAxis;if(!g)return;const y=g.min,m=g.max,x=(m-y)*Ot/2;d.setOption({xAxis:[{min:y+x,max:m-x}],yAxis:[{min:y+x,max:m-x}]})},h=()=>{var _;const d=(_=l.value)==null?void 0:_.chart;if(!d){console.log("Chart instance not found");return}const v=d.getOption(),g=Array.isArray(v.xAxis)?v.xAxis[0]:v.xAxis;if(!g)return;const y=g.min,m=g.max,x=(m-y)*Ot/2;d.setOption({xAxis:[{min:y-x,max:m+x}],yAxis:[{min:y-x,max:m+x}]})},c=()=>{var v;const d=(v=l.value)==null?void 0:v.chart;if(!d){console.log("Chart instance not found");return}d.setOption({xAxis:[{min:-i.value.maxValue,max:i.value.maxValue}],yAxis:[{min:-i.value.maxValue,max:i.value.maxValue}]})},f=U(()=>({transition:["all"],tooltip:{trigger:"item",formatter:d=>`${d.seriesName}<br/>E: ${d.data[0].toFixed(2)}<br/>N: ${d.data[1].toFixed(2)}`},dataZoom:[{type:"inside",xAxisIndex:[0],yAxisIndex:[0]}],grid:{show:!0,left:t.enableLegend==!0?"18%":"15px",right:"30px",top:"20px",bottom:"20px",containLabel:!0},legend:{show:t.enableLegend,itemWidth:15,orient:"vertical",left:"left",textStyle:{color:n.value.textColor},tooltip:{show:!0,formatter:qe}},xAxis:{type:"value",splitNumber:10,minorTick:{show:!0},minorSplitLine:{show:!0,lineStyle:{color:"rgba(0, 0, 0, 0.05)",width:1}},axisLine:{show:!0,onZero:!0},name:"E, м",nameLocation:"end",nameGap:5,min:-i.value.maxValue,max:i.value.maxValue,axisLabel:{formatter:d=>d.toFixed(1),color:n.value.textColorSecondary},boundaryGap:!1},yAxis:{type:"value",splitNumber:10,minorTick:{show:!0},minorSplitLine:{show:!0,lineStyle:{color:"rgba(0, 0, 0, 0.05)",width:1}},axisLine:{onZero:!0},name:"N, м",nameLocation:"end",nameGap:5,min:-i.value.maxValue,max:i.value.maxValue,axisLabel:{formatter:d=>d.toFixed(1),color:n.value.textColorSecondary}},series:i.value.series})),p=d=>{e("update:bis",d)};return(d,v)=>(Qt(),Jt("div",ka,[V("div",Wa,[N(F(Qe),{option:f.value,autoresize:!0,class:"h-25rem",ref_key:"chartRef",ref:l,style:te({width:t.enableLegend===!0?"36rem":"29rem"})},null,8,["option","style"]),v[3]||(v[3]=V("div",{id:"custom-tooltip"},null,-1)),N(Je,{"model-value":t.bis,class:"bis-select absolute",command:c,"onUpdate:modelValue":p},null,8,["model-value"]),V("div",Ga,[N(F(tt),{class:"p-0 p-button-text",onClick:u},{default:J(()=>v[0]||(v[0]=[V("span",{class:"pi pi-search-plus"},null,-1)])),_:1}),N(F(tt),{class:"p-0 button p-button-text",onClick:h},{default:J(()=>v[1]||(v[1]=[V("span",{class:"pi pi-search-minus"},null,-1)])),_:1}),N(F(tt),{class:"p-0 button p-button-text",onClick:c},{default:J(()=>v[2]||(v[2]=[V("span",{class:"pi pi-undo"},null,-1)])),_:1})])])]))}}),qa=ee(Ha,[["__scopeId","data-v-5bb779d4"]]);export{qa as default};
