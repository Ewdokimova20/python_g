import{r as R,aj as Oe,w,q as K,G as O,E as ke,B as V,u as o,ak as Se,al as Te,am as re,an as le,ao as Ie,ap as ie,d as B,ai as X,o as h,c as y,l as x,t as C,e as E,aq as Pe,ar as De,b as Y,g as Z,m as ee,v as j,F as I,h as P,_ as z,as as Fe,s as oe,a as G}from"./index-B9ncFhZ9.js";import{s as Le}from"./inputswitch.esm-v0smpIrf.js";function ue(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Object.keys(e).reduce((n,s)=>(t.includes(s)||(n[s]=o(e[s])),n),{})}function N(e){return typeof e=="function"}function Ne(e){return Se(e)||Te(e)}function fe(e,t,n,s){return e.call(s,o(t),o(n),s)}function $e(e){return e.$valid!==void 0?!e.$valid:!e}function Ae(e,t,n,s,r,c,i){let{$lazy:d,$rewardEarly:f}=r,v=arguments.length>7&&arguments[7]!==void 0?arguments[7]:[],$=arguments.length>8?arguments[8]:void 0,u=arguments.length>9?arguments[9]:void 0,m=arguments.length>10?arguments[10]:void 0;const p=R(!!s.value),a=R(0);n.value=!1;const l=w([t,s].concat(v,m),()=>{if(d&&!s.value||f&&!u.value&&!n.value)return;let g;try{g=fe(e,t,$,i)}catch(_){g=Promise.reject(_)}a.value++,n.value=!!a.value,p.value=!1,Promise.resolve(g).then(_=>{a.value--,n.value=!!a.value,c.value=_,p.value=$e(_)}).catch(_=>{a.value--,n.value=!!a.value,c.value=_,p.value=!0})},{immediate:!0,deep:typeof t=="object"});return{$invalid:p,$unwatch:l}}function Be(e,t,n,s,r,c,i,d){let{$lazy:f,$rewardEarly:v}=s;const $=()=>({}),u=V(()=>{if(f&&!n.value||v&&!d.value)return!1;let m=!0;try{const p=fe(e,t,i,c);r.value=p,m=$e(p)}catch(p){r.value=p}return m});return{$unwatch:$,$invalid:u}}function ze(e,t,n,s,r,c,i,d,f,v,$){const u=R(!1),m=e.$params||{},p=R(null);let a,l;e.$async?{$invalid:a,$unwatch:l}=Ae(e.$validator,t,u,n,s,p,r,e.$watchTargets,f,v,$):{$invalid:a,$unwatch:l}=Be(e.$validator,t,n,s,p,r,f,v);const g=e.$message;return{$message:N(g)?V(()=>g(ue({$pending:u,$invalid:a,$params:ue(m),$model:t,$response:p,$validator:c,$propertyPath:d,$property:i}))):g||"",$params:m,$pending:u,$invalid:a,$response:p,$unwatch:l}}function Me(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=o(e),n=Object.keys(t),s={},r={},c={};return n.forEach(i=>{const d=t[i];switch(!0){case N(d.$validator):s[i]=d;break;case N(d):s[i]={$validator:d};break;case i.startsWith("$"):c[i]=d;break;default:r[i]=d}}),{rules:s,nestedValidators:r,config:c}}function Ue(){}const qe="__root";function ge(e,t,n){try{var s=Promise.resolve(e());return t?s.then(t):s}catch(r){return Promise.reject(r)}}function We(e,t){return ge(e,Ue)}function Ge(e,t){var n=e();return n&&n.then?n.then(t):t(n)}function He(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(s){return Promise.reject(s)}}}function Ke(e,t,n,s,r,c,i,d,f){const v=Object.keys(e),$=s.get(r,e),u=R(!1),m=R(!1),p=R(0);if($){if(!$.$partial)return $;$.$unwatch(),u.value=$.$dirty.value}const a={$dirty:u,$path:r,$touch:()=>{u.value||(u.value=!0)},$reset:()=>{u.value&&(u.value=!1)},$commit:()=>{}};return v.length?(v.forEach(l=>{a[l]=ze(e[l],t,a.$dirty,c,i,l,n,r,f,m,p)}),a.$externalResults=V(()=>d.value?[].concat(d.value).map((l,g)=>({$propertyPath:r,$property:n,$validator:"$externalResults",$uid:`${r}-externalResult-${g}`,$message:l,$params:{},$response:null,$pending:!1})):[]),a.$invalid=V(()=>{const l=v.some(g=>o(a[g].$invalid));return m.value=l,!!a.$externalResults.value.length||l}),a.$pending=V(()=>v.some(l=>o(a[l].$pending))),a.$error=V(()=>a.$dirty.value?a.$pending.value||a.$invalid.value:!1),a.$silentErrors=V(()=>v.filter(l=>o(a[l].$invalid)).map(l=>{const g=a[l];return O({$propertyPath:r,$property:n,$validator:l,$uid:`${r}-${l}`,$message:g.$message,$params:g.$params,$response:g.$response,$pending:g.$pending})}).concat(a.$externalResults.value)),a.$errors=V(()=>a.$dirty.value?a.$silentErrors.value:[]),a.$unwatch=()=>v.forEach(l=>{a[l].$unwatch()}),a.$commit=()=>{m.value=!0,p.value=Date.now()},s.set(r,e,a),a):($&&s.set(r,e,a),a)}function Je(e,t,n,s,r,c,i){const d=Object.keys(e);return d.length?d.reduce((f,v)=>(f[v]=J({validations:e[v],state:t,key:v,parentKey:n,resultsCache:s,globalConfig:r,instance:c,externalResults:i}),f),{}):{}}function Qe(e,t,n){const s=V(()=>[t,n].filter(a=>a).reduce((a,l)=>a.concat(Object.values(o(l))),[])),r=V({get(){return e.$dirty.value||(s.value.length?s.value.every(a=>a.$dirty):!1)},set(a){e.$dirty.value=a}}),c=V(()=>{const a=o(e.$silentErrors)||[],l=s.value.filter(g=>(o(g).$silentErrors||[]).length).reduce((g,_)=>g.concat(..._.$silentErrors),[]);return a.concat(l)}),i=V(()=>{const a=o(e.$errors)||[],l=s.value.filter(g=>(o(g).$errors||[]).length).reduce((g,_)=>g.concat(..._.$errors),[]);return a.concat(l)}),d=V(()=>s.value.some(a=>a.$invalid)||o(e.$invalid)||!1),f=V(()=>s.value.some(a=>o(a.$pending))||o(e.$pending)||!1),v=V(()=>s.value.some(a=>a.$dirty)||s.value.some(a=>a.$anyDirty)||r.value),$=V(()=>r.value?f.value||d.value:!1),u=()=>{e.$touch(),s.value.forEach(a=>{a.$touch()})},m=()=>{e.$commit(),s.value.forEach(a=>{a.$commit()})},p=()=>{e.$reset(),s.value.forEach(a=>{a.$reset()})};return s.value.length&&s.value.every(a=>a.$dirty)&&u(),{$dirty:r,$errors:i,$invalid:d,$anyDirty:v,$error:$,$pending:f,$touch:u,$reset:p,$silentErrors:c,$commit:m}}function J(e){const t=He(function(){return F.value||W(),Ge(function(){if(l.$rewardEarly)return ne(),We(ie)},function(){return ge(ie,function(){return new Promise(b=>{if(!q.value)return b(!U.value);const S=w(q,()=>{b(!U.value),S()})})})})});let{validations:n,state:s,key:r,parentKey:c,childResults:i,resultsCache:d,globalConfig:f={},instance:v,externalResults:$}=e;const u=c?`${c}.${r}`:r,{rules:m,nestedValidators:p,config:a}=Me(n),l=Object.assign({},f,a),g=r?V(()=>{const b=o(s);return b?o(b[r]):void 0}):s,_=Object.assign({},o($)||{}),k=V(()=>{const b=o($);return r?b?o(b[r]):void 0:b}),te=Ke(m,g,r,d,u,l,v,k,s),ae=Je(p,g,u,d,l,v,k),{$dirty:F,$errors:_e,$invalid:U,$anyDirty:be,$error:Re,$pending:q,$touch:W,$reset:xe,$silentErrors:we,$commit:ne}=Qe(te,ae,i),Ce=r?V({get:()=>o(g),set:b=>{F.value=!0;const S=o(s),se=o($);se&&(se[r]=_[r]),K(S[r])?S[r].value=b:S[r]=b}}):null;r&&l.$autoDirty&&w(g,()=>{F.value||W();const b=o($);b&&(b[r]=_[r])},{flush:"sync"});function je(b){return(i.value||{})[b]}function Ee(){K($)?$.value=_:Object.keys(_).length===0?Object.keys($).forEach(b=>{delete $[b]}):Object.assign($,_)}return O(Object.assign({},te,{$model:Ce,$dirty:F,$error:Re,$errors:_e,$invalid:U,$anyDirty:be,$pending:q,$touch:W,$reset:xe,$path:u||qe,$silentErrors:we,$validate:t,$commit:ne},i&&{$getResultsForChild:je,$clearExternalResults:Ee},ae))}class Xe{constructor(){this.storage=new Map}set(t,n,s){this.storage.set(t,{rules:n,result:s})}checkRulesValidity(t,n,s){const r=Object.keys(s),c=Object.keys(n);return c.length!==r.length||!c.every(d=>r.includes(d))?!1:c.every(d=>n[d].$params?Object.keys(n[d].$params).every(f=>o(s[d].$params[f])===o(n[d].$params[f])):!0)}get(t,n){const s=this.storage.get(t);if(!s)return;const{rules:r,result:c}=s,i=this.checkRulesValidity(t,n,r),d=c.$unwatch?c.$unwatch:()=>({});return i?c:{$dirty:c.$dirty,$partial:!0,$unwatch:d}}}const L={COLLECT_ALL:!0,COLLECT_NONE:!1},ce=Symbol("vuelidate#injectChiildResults"),de=Symbol("vuelidate#removeChiildResults");function Ye(e){let{$scope:t,instance:n}=e;const s={},r=R([]),c=V(()=>r.value.reduce(($,u)=>($[u]=o(s[u]),$),{}));function i($,u){let{$registerAs:m,$scope:p,$stopPropagation:a}=u;a||t===L.COLLECT_NONE||p===L.COLLECT_NONE||t!==L.COLLECT_ALL&&t!==p||(s[m]=$,r.value.push(m))}n.__vuelidateInjectInstances=[].concat(n.__vuelidateInjectInstances||[],i);function d($){r.value=r.value.filter(u=>u!==$),delete s[$]}n.__vuelidateRemoveInstances=[].concat(n.__vuelidateRemoveInstances||[],d);const f=re(ce,[]);le(ce,n.__vuelidateInjectInstances);const v=re(de,[]);return le(de,n.__vuelidateRemoveInstances),{childResults:c,sendValidationResultsToParent:f,removeValidationResultsFromParent:v}}function ve(e){return new Proxy(e,{get(t,n){return typeof t[n]=="object"?ve(t[n]):V(()=>t[n])}})}function me(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};arguments.length===1&&(n=e,e=void 0,t=void 0);let{$registerAs:s,$scope:r=L.COLLECT_ALL,$stopPropagation:c,$externalResults:i,currentVueInstance:d}=n;const f=d||Ie(),v=f?f.type:{};!s&&f&&(s=`_vuelidate_${f.uid||f._uid}`);const $=R({}),u=new Xe,{childResults:m,sendValidationResultsToParent:p,removeValidationResultsFromParent:a}=f?Ye({$scope:r,instance:f}):{childResults:R({})};if(!e&&v.validations){const l=v.validations;t=R({}),Oe(()=>{t.value=f.proxy,w(()=>N(l)?l.call(t.value,new ve(t.value)):l,g=>{$.value=J({validations:g,state:t,childResults:m,resultsCache:u,globalConfig:n,instance:f.proxy,externalResults:i||f.proxy.vuelidateExternalResults})},{immediate:!0})}),n=v.validationsConfig||n}else{const l=K(e)||Ne(e)?e:O(e||{});w(l,g=>{$.value=J({validations:g,state:t,childResults:m,resultsCache:u,globalConfig:n,instance:f?f.proxy:{},externalResults:i})},{immediate:!0})}return f&&(p.forEach(l=>l($,{$registerAs:s,$scope:r,$stopPropagation:c})),ke(()=>a.forEach(l=>l(s)))),V(()=>Object.assign({},o($.value),m.value))}function A(e){return typeof e=="function"}function Q(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function M(e){return A(e.$validator)?Object.assign({},e):{$validator:e}}function pe(e){return typeof e=="object"?e.$valid:e}function he(e){return e.$validator||e}function Ze(e,t){if(!Q(e))throw new Error(`[@vuelidate/validators]: First parameter to "withParams" should be an object, provided ${typeof e}`);if(!Q(t)&&!A(t))throw new Error("[@vuelidate/validators]: Validator must be a function or object with $validator parameter");const n=M(t);return n.$params=Object.assign({},n.$params||{},e),n}function et(e,t){if(!A(e)&&typeof o(e)!="string")throw new Error(`[@vuelidate/validators]: First parameter to "withMessage" should be string or a function returning a string, provided ${typeof e}`);if(!Q(t)&&!A(t))throw new Error("[@vuelidate/validators]: Validator must be a function or object with $validator parameter");const n=M(t);return n.$message=e,n}function tt(e,t=[]){const n=M(e);return Object.assign({},n,{$async:!0,$watchTargets:t})}function at(e){return{$validator(t,...n){return o(t).reduce((s,r)=>{const c=Object.entries(r).reduce((i,[d,f])=>{const v=e[d]||{},$=Object.entries(v).reduce((u,[m,p])=>{const l=he(p).call(this,f,r,...n),g=pe(l);if(u.$data[m]=l,u.$data.$invalid=!g||!!u.$data.$invalid,u.$data.$error=u.$data.$invalid,!g){let _=p.$message||"";const k=p.$params||{};typeof _=="function"&&(_=_({$pending:!1,$invalid:!g,$params:k,$model:f,$response:l})),u.$errors.push({$property:d,$message:_,$params:k,$response:l,$model:f,$pending:!1,$validator:m})}return{$valid:u.$valid&&g,$data:u.$data,$errors:u.$errors}},{$valid:!0,$data:{},$errors:[]});return i.$data[d]=$.$data,i.$errors[d]=$.$errors,{$valid:i.$valid&&$.$valid,$data:i.$data,$errors:i.$errors}},{$valid:!0,$data:{},$errors:{}});return{$valid:s.$valid&&c.$valid,$data:s.$data.concat(c.$data),$errors:s.$errors.concat(c.$errors)}},{$valid:!0,$data:[],$errors:[]})},$message:({$response:t})=>t?t.$errors.map(n=>Object.values(n).map(s=>s.map(r=>r.$message)).reduce((s,r)=>s.concat(r),[])):[]}}const D=e=>{if(e=o(e),Array.isArray(e))return!!e.length;if(e==null)return!1;if(e===!1)return!0;if(e instanceof Date)return!isNaN(e.getTime());if(typeof e=="object"){for(let t in e)return!0;return!1}return!!String(e).length},nt=e=>(e=o(e),Array.isArray(e)?e.length:typeof e=="object"?Object.keys(e).length:String(e).length);function ye(e){return t=>(t=o(t),!D(t)||e.test(t))}var T=Object.freeze({__proto__:null,withParams:Ze,withMessage:et,withAsync:tt,forEach:at,req:D,len:nt,regex:ye,unwrap:o,unwrapNormalizedValidator:he,unwrapValidatorResponse:pe,normalizeValidatorObject:M});function st(e){return typeof e=="string"&&(e=e.trim()),D(e)}var Ve={$validator:st,$message:"Value is required",$params:{type:"required"}};function rt(e){return t=>!D(t)||(!/\s/.test(t)||t instanceof Date)&&+t>=+o(e)}function lt(e){return{$validator:rt(e),$message:({$params:t})=>`The minimum value allowed is ${t.min}`,$params:{min:e,type:"minValue"}}}function it(e){return t=>!D(t)||(!/\s/.test(t)||t instanceof Date)&&+t<=+o(e)}var ot=e=>({$validator:it(e),$message:({$params:t})=>`The maximum value is ${t.max}`,$params:{max:e,type:"maxValue"}}),ut=ye(/(^[0-9]*$)|(^-[0-9]+$)/),ct={$validator:ut,$message:"Value is not an integer",$params:{type:"integer"}};const dt={class:"field flex flex-column align-items-start w-full text-left"},ft=["for"],$t={class:"flex w-full"},gt={class:"text-xs"},vt={key:0},mt={key:1,class:"saved"},pt={key:2,class:"p-error"},ht={class:"errors text-xs"},yt={class:"p-error"},Vt={key:0,class:"text-xs"},_t={key:0},bt={key:1},Rt=B({__name:"BisConfigNumSetting",props:{settingId:{},settingUIData:{},initValue:{}},setup(e){const t=e,{label:n,defaultValue:s,minRangeValue:r,maxRangeValue:c}=t.settingUIData,i=R(t.initValue),d={newSettingValue:{required:T.withMessage("Поле не может быть пустым",Ve),minValue:T.withMessage(()=>`Введите значение не менее ${r}`,lt(r)),...c&&{maxValue:T.withMessage(()=>`Введите значение не более ${c}`,ot(c))},integer:T.withMessage("Значение должно быть целым числом",ct)}},f=me(d,{newSettingValue:i},{$autoDirty:!0,$lazy:!0}),v=O(new X({url:"/bis_control_config"})),$=R(!1);w(()=>v.posting,(a,l)=>{l&&!a&&(v.postingFailed?$.value=!1:$.value=!0)}),w(i,()=>{$.value=!1});const u=R(!1);w(()=>$.value,a=>{a&&(u.value=!0,f.value.$reset(),setTimeout(()=>{u.value=!1},2e3))});async function m(){await f.value.newSettingValue.$validate()&&v.post({[t.settingId]:i.value})}async function p(){i.value=s,await m()}return(a,l)=>(h(),y("div",dt,[x("label",{class:"text-left w-8",style:{"font-size":"0.8rem",color:"#6c757d"},for:t.settingId},C(o(n)),9,ft),x("div",$t,[E(o(De),{id:t.settingId,modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=g=>i.value=g),type:"text",autocomplete:"off",placeholder:"Введите значение",disabled:!!v.posting,onKeyup:l[1]||(l[1]=Pe(g=>m(),["enter"])),onBlur:l[2]||(l[2]=g=>m())},null,8,["id","modelValue","disabled"]),E(o(ee),{class:"p-button-text p-button-sm text-xs w-max",disabled:!!v.posting,onClick:l[3]||(l[3]=g=>p())},{default:Y(()=>l[4]||(l[4]=[Z(" По умолчанию ")])),_:1},8,["disabled"])]),x("div",gt,[v.posting?(h(),y("small",vt,"Сохраняется...")):u.value?(h(),y("small",mt,"Сохранено!")):v.postingFailed?(h(),y("small",pt,"Значение не сохранено")):j("",!0)]),x("div",ht,[(h(!0),y(I,null,P(o(f).$errors,g=>(h(),y("div",{key:g.$uid},[x("small",yt,C(g.$message),1)]))),128))]),o(f).$dirty?j("",!0):(h(),y("div",Vt,[o(r)&&o(c)?(h(),y("small",_t," Введите число в диапазоне "+C(o(r))+"-"+C(o(c)),1)):o(c)?j("",!0):(h(),y("small",bt," Введите число не менее "+C(o(r)),1))]))]))}}),xt=z(Rt,[["__scopeId","data-v-9fe63235"]]),wt={class:"field flex flex-column align-items-start w-full text-left"},Ct=["for"],jt={class:"flex w-full"},Et={class:"text-xs"},Ot={key:0},kt={key:1,class:"saved"},St={key:2,class:"p-error"},Tt=B({__name:"BisConfigBoolSetting",props:{settingId:{},settingUIData:{},initValue:{type:Boolean}},setup(e){const t=e,{label:n}=t.settingUIData,s=!!t.settingUIData.defaultValue,r=!!t.initValue,c=O(new X({url:"/bis_control_config"})),i=R(r),d=R(!1);w(()=>c.posting,($,u)=>{u&&!$&&(c.postingFailed?(d.value=!1,i.value=!i.value):d.value=!0)}),w(()=>d.value,$=>{$&&setTimeout(()=>{d.value=!1},1500)});function f(){c.post({[t.settingId]:i.value})}function v(){i.value!==s&&(i.value=s,f())}return($,u)=>(h(),y("div",wt,[x("label",{class:"text-left w-8",style:{"font-size":"0.8rem",color:"#6c757d"},for:t.settingId},C(o(n)),9,Ct),x("div",jt,[E(o(Le),{id:t.settingId,modelValue:i.value,"onUpdate:modelValue":u[0]||(u[0]=m=>i.value=m),disabled:!!c.posting,onChange:u[1]||(u[1]=m=>f())},null,8,["id","modelValue","disabled"]),E(o(ee),{class:"p-button-text p-button-sm text-xs w-max",disabled:!!c.posting,onClick:u[2]||(u[2]=m=>v())},{default:Y(()=>u[3]||(u[3]=[Z("По умолчанию")])),_:1},8,["disabled"])]),x("div",Et,[c.posting?(h(),y("small",Ot,"Сохраняется...")):d.value?(h(),y("small",kt,"Сохранено!")):c.postingFailed?(h(),y("small",St,"Значение не сохранено")):j("",!0)])]))}}),It=z(Tt,[["__scopeId","data-v-47aa21c9"]]),H={num:{signalStoringTime:{label:"Глубина буфера сигналов для определения состояния приема [сек]",defaultValue:10,minRangeValue:1,maxRangeValue:30},signalCompletenessPercent:{label:'Порог для определения состояния "Сбой" [%]',defaultValue:90,minRangeValue:1,maxRangeValue:100},stationVisibilityThreshold:{label:'Кол-во станций для определения обобщенного состояния приема сигнала "Не определено"',defaultValue:1,minRangeValue:1},stationReceivingThreshold:{label:'Кол-во станций для определения обобщенного состояния приема сигнала "Прием"',defaultValue:1,minRangeValue:1},stationReceivingErrorThreshold:{label:'Кол-во станций для определения обобщенного состояния приема сигнала "Сбой"',defaultValue:1,minRangeValue:1},residualPairsDifferenceThreshold:{label:"Порог для парных разностей невязок [м]",defaultValue:5,minRangeValue:0},residualAverageDifferenceThreshold:{label:"Порог для разности невязки и средней невязки [м]",defaultValue:10,minRangeValue:0},ephemeridesControlThreshold:{label:"Порог для согласованности ЭИ [м]",defaultValue:2,minRangeValue:0},digitalInfoTransmittingDelayThreshold:{label:"Порог для своевременности приема ЦИ [с]",defaultValue:10,minRangeValue:0},minElevationForNavSolution:{label:"Порог для вынесения решения об использовании невязок в решении НВЗ [угл. град]",defaultValue:15,minRangeValue:0},signalValidityPercent:{label:"Порог для определения годности сигнала [%]",defaultValue:90,minRangeValue:1,maxRangeValue:100},signalValidityAnalyzingTime:{label:"Глубина буфера сигналов для определения годности [сек]",defaultValue:10,minRangeValue:1,maxRangeValue:30},stationValidityThreshold:{label:"Кол-во станций для определения обобщенного состояния годности сигнала",defaultValue:1,minRangeValue:1},stationValidityErrorThreshold:{label:"Кол-во станций для определения обобщенного состояния негодности сигнала",defaultValue:1,minRangeValue:1}},bool:{useSingleFreqNka:{label:"Использовать одночастотные КА в решении НВЗ?",defaultValue:0,minRangeValue:0,maxRangeValue:1},checkPacketReceiveTime:{label:"Отбрасывать пакеты с запаздыванием более 10 секунд из обработки?",defaultValue:0,minRangeValue:0,maxRangeValue:1},checkDiReceiveInTime:{label:"Использовать ЦИ, запаздывание которой превышает порог для своевременности приема ЦИ?",defaultValue:0,minRangeValue:0,maxRangeValue:1}},select:{logLevel:{label:"Уровень логирования",defaultValue:0}}},Pt={class:"field flex flex-column align-items-start w-full text-left"},Dt={class:"text-left w-8",style:{"font-size":"0.8rem",color:"#6c757d"},for:"props.settingId"},Ft={class:"flex w-full"},Lt={class:"text-xs"},Nt={key:0},At={key:1,class:"saved"},Bt={key:2,class:"p-error"},zt={class:"errors"},Mt=B({__name:"SettingSelect",props:{options:{},settingId:{},settingUIData:{},initValue:{}},setup(e){var p;const t=e,{label:n,defaultValue:s}=t.settingUIData,r=R({label:(p=t.initValue)==null?void 0:p.toString(),value:t.initValue}),c=V(()=>{var a;return((a=t.options)==null?void 0:a.map(l=>({label:l.toString(),value:l})))??[]}),i=V(()=>({newSettingValue:{required:T.withMessage("Поле не может быть пустым",Ve),$autoDirty:!0,$lazy:!0}})),d=me(i,{newSettingValue:r}),f=O(new X({url:"/bis_control_config"})),v=R(!1);w(()=>f.posting,(a,l)=>{l&&!a&&(f.postingFailed?v.value=!1:v.value=!0)}),w(r,()=>{v.value=!1});const $=R(!1);w(()=>v.value,a=>{a&&($.value=!0,d.value.$reset(),setTimeout(()=>{$.value=!1},2e3))});async function u(){await d.value.newSettingValue.$validate()&&f.post({[t.settingId]:r.value.value})}async function m(){r.value.value=s,await u()}return(a,l)=>(h(),y("div",Pt,[x("label",Dt,C(o(n)),1),x("div",Ft,[E(o(Fe),{id:t.settingId,modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=g=>r.value=g),placeholder:"Выберите значение","empty-message":"Нет доступных опций",options:c.value,disabled:f.posting,"option-label":g=>g.label,onChange:l[1]||(l[1]=g=>u())},null,8,["id","modelValue","options","disabled","option-label"]),E(o(ee),{class:"p-button-text p-button-sm text-xs w-max",disabled:f.posting,onClick:l[2]||(l[2]=g=>m())},{default:Y(()=>l[3]||(l[3]=[Z(" По умолчанию ")])),_:1},8,["disabled"])]),x("div",Lt,[f.posting?(h(),y("small",Nt,"Сохраняется...")):$.value?(h(),y("small",At,"Сохранено!")):f.postingFailed?(h(),y("small",Bt,"Значение не сохранено")):j("",!0)]),x("div",zt,[(h(!0),y(I,null,P(o(d).$errors,g=>(h(),y("div",{key:g.$uid,class:"text-xs"},[x("small",null,C(g.$message),1)]))),128))])]))}}),Ut=z(Mt,[["__scopeId","data-v-3301b5f6"]]),qt={class:"container"},Wt={key:0,class:"settings"},Gt={key:1,class:"p-error"},Ht=B({__name:"BisSettings",setup(e){const t=oe({url:"/bis_control_config"}),n=oe({url:"/bis_control_config/logging_levels"});return(s,r)=>(h(),y("div",qt,[o(t).available?(h(),y("div",Wt,[(h(!0),y(I,null,P(o(H).select,(c,i)=>{var d;return h(),G(Ut,{key:i,class:"mb-5",options:o(n).data,"setting-id":i,"setting-u-i-data":c,"init-value":(d=o(t).data)==null?void 0:d[i]},null,8,["options","setting-id","setting-u-i-data","init-value"])}),128)),(h(!0),y(I,null,P(o(H).num,(c,i)=>(h(),G(xt,{key:i,class:"mb-4","setting-id":i,"setting-u-i-data":c,"init-value":o(t).data?o(t).data[i]:NaN},null,8,["setting-id","setting-u-i-data","init-value"]))),128)),(h(!0),y(I,null,P(o(H).bool,(c,i)=>(h(),G(It,{key:i,"setting-id":i,"setting-u-i-data":c,"init-value":o(t).data?o(t).data[i]:!1},null,8,["setting-id","setting-u-i-data","init-value"]))),128))])):j("",!0),o(t).error?(h(),y("div",Gt," Не удалось загрузить настройки. Проверьте соединение с серверной частью СПО КНП ")):j("",!0)]))}}),Qt=z(Ht,[["__scopeId","data-v-6250145c"]]);export{Qt as default};
