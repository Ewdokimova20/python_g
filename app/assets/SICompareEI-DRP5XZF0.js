import{d as x,r as I,G as $,ai as A,w as F,B as h,o as f,c as k,l as d,t as m,g as n,u as b,e as M,a as B,b as C,p as U,S as D,cT as E,aA as j}from"./index-B9ncFhZ9.js";import{_ as G}from"./ComparisonTable.vue_vue_type_script_setup_true_lang--VMzfCjq.js";import{f as J}from"./utils-BUzwWt9V.js";const L={key:0,style:{color:"var(--text-color-secondary)"}},z=x({__name:"SICompareEI",props:{params:{},type:{}},setup(O){const c=O,T=JSON.parse(c.params),u=I(),t=$(new A({url:"/check_neighbor_SI"}));t.getParams={...T,type:c.type},t.get(),F(()=>t.error,e=>{const a=e==null?void 0:e.response;(a==null?void 0:a.status)===404?u.value=E.NOT_FOUND:(a==null?void 0:a.status)===401?u.value=a==null?void 0:a.data:(a==null?void 0:a.status)===403?u.value=E.NO_CDB_CONNECTION:u.value=j.DEFAULT});const _=h(()=>{var e,a,r,s,o,l,i,p;return[{header:"Параметр",field:"param",sortable:!0},{header:`ЭИ на tb = ${(a=(e=t.data)==null?void 0:e.time)==null?void 0:a.tb}`,field:"curr"},{header:`ЭИ на tb = ${(s=(r=t.data)==null?void 0:r.time)==null?void 0:s.neighborTb}`,field:"neighbor"},{header:`ЭИ на tb = ${(l=(o=t.data)==null?void 0:o.time)==null?void 0:l.tb} после пересчета на границу tb`,field:"currBorder"},{header:`ЭИ на tb = ${(p=(i=t.data)==null?void 0:i.time)==null?void 0:p.neighborTb} после пересчета на границу tb`,field:"neighborBorder"},{header:"Разность",field:"diff"},{header:"Пороговое значение",field:"threshold"}]}),S=h(()=>{var e;return(e=t.data)==null?void 0:e.result.map(({param:a,isValid:r,...s})=>({...Object.entries(s).reduce((o,[l,i])=>({...o,[l]:J(i,a)}),{}),param:a,isValid:r}))});return(e,a)=>{var r,s,o,l,i,p,g,v,N,y;return f(),k("div",null,[t.isDataNotEmpty?(f(),k("div",L,[d("p",null,"НКА: "+m((r=t.data)==null?void 0:r.sysNum)+" ("+m((s=t.data)==null?void 0:s.nkaNum)+")",1),d("p",null,[a[0]||(a[0]=n("t")),a[1]||(a[1]=d("sub",null,"b",-1)),n(" = "+m((o=t.data)==null?void 0:o.time.tb),1)]),d("p",null,"N = "+m((l=t.data)==null?void 0:l.time.n),1),d("p",null,[a[2]||(a[2]=n("Время t")),a[3]||(a[3]=d("sub",null,"b",-1)),n(": "+m((p=(i=t.data)==null?void 0:i.time)==null?void 0:p.tbTimestamp),1)]),d("p",null," Время закладки СИ: "+m(((v=(g=t.data)==null?void 0:g.time)==null?void 0:v.timestamp)&&b(U)((y=(N=t.data)==null?void 0:N.time)==null?void 0:y.timestamp)),1),M(G,{columns:_.value,data:S.value,"is-loading":t.loading},null,8,["columns","data","is-loading"])])):u.value?(f(),B(b(D),{key:1,severity:"error",closable:!1},{default:C(()=>[n(m(u.value),1)]),_:1})):(f(),B(b(D),{key:2,severity:"info",closable:!1},{default:C(()=>a[4]||(a[4]=[n("Отсутствуют данные о сравнении ЭИ")])),_:1}))])}}});export{z as default};
