import{d as T,k as H,r as x,w as K,o as r,c,F as w,h as z,e as _,u as t,dg as B,l as e,t as u,B as C,a as I,n as M,v as U,_ as J,s as Q,dh as X,di as Y,y as Z,m as A}from"./index-B9ncFhZ9.js";import{u as ee}from"./NavSolution-CE9UZOOa.js";import{g as se}from"./bis-Bw-5DPa6.js";import"./useSelectedBisState-BJ3N0Krx.js";import"./setItemToLS-BDlwVMSR.js";import"./useSessionStorage-BONWqHvJ.js";const le={class:"flex",style:{gap:"0.25rem"}},te=["for"],ae=T({__name:"NkaMultipleCheckbox",props:{modelValue:{}},emits:["update:modelValue"],setup(D,{emit:f}){const o=D,n=H(),a=x(o.modelValue),b=f;return K(()=>a.value,()=>{b("update:modelValue",a.value)}),(h,m)=>(r(),c("div",le,[(r(!0),c(w,null,z(t(n).sysNumList,s=>(r(),c("div",{key:s,class:"flex align-items-center flex-column"},[_(t(B),{id:`nka-${s}`,modelValue:a.value,"onUpdate:modelValue":m[0]||(m[0]=g=>a.value=g),name:"nkaList",value:s},null,8,["id","modelValue","value"]),e("label",{for:`nka-${s}`,class:"text-sm"},u(s),9,te)]))),128))]))}}),oe={class:"flex flex-column align-items-center"},ne={class:"text-sm"},ie={class:"cell font-medium"},ue={class:"line-height-3"},re={class:"line-height-3"},de={class:"line-height-3"},ce={class:"cell font-medium"},me={class:"cell"},pe={class:"line-height-3"},ve={class:"cell"},_e={class:"line-height-3"},be={class:"cell"},ge={class:"line-height-3"},ye=T({__name:"UserSolutionTable",props:{bis:{},signalType:{}},setup(D){const f=D,o=C(()=>{var d;return(d=f.bis)==null?void 0:d.bisId}),n=C(()=>f.signalType),a=ee(),b=["e","n","u","x","y","z","dx","dy","dz","gDOP","distance"],h={immediate:"Стандартное РНВЗ",user:"Пользовательское РНВЗ",best:"Лучшее РНВЗ"},m={e:"E (B), м",n:"N (L), м",u:"H, м",x:"x, м",y:"y, м",z:"z, м",dx:"dx, м",dy:"dy, м",dz:"dz, м",gDOP:"GDOP",distance:"Отклонение",nkaList:"Список НКА"},s=d=>d==null?"0":d.toFixed(1),g=d=>d?d.join(" ,"):"";return(d,p)=>{var l,k,V,S,N,i,y,$,L;return r(),c("div",oe,[e("table",ne,[e("thead",null,[e("tr",null,[p[0]||(p[0]=e("th",null,null,-1)),(r(),c(w,null,z(["immediate","user","best"],v=>e("th",{key:v,class:"header text-sm"},u(h[v]),1)),64))])]),e("tbody",null,[(r(),c(w,null,z(b,v=>{var O,R,j,F,P,G,W,q,E;return e("tr",{key:v},[e("td",ie,u(m[v]),1),e("td",null,[e("span",ue,u(s((j=(R=(O=t(a).data)==null?void 0:O[o.value])==null?void 0:R[n.value])==null?void 0:j[v])),1)]),e("td",null,[e("span",re,u(s((G=(P=(F=t(a).userSolutionData)==null?void 0:F[o.value])==null?void 0:P[n.value])==null?void 0:G[v])),1)]),e("td",null,[e("span",de,u(s((E=(q=(W=t(a).bestSolutionData)==null?void 0:W[o.value])==null?void 0:q[n.value])==null?void 0:E[v])),1)])])}),64)),e("tr",null,[e("td",ce,u(m.nkaList),1),e("td",me,[e("span",pe,u(g((V=(k=(l=t(a).data)==null?void 0:l[o.value])==null?void 0:k[n.value])==null?void 0:V.nkaList)),1)]),e("td",ve,[e("span",_e,u(g((i=(N=(S=t(a).userSolutionData)==null?void 0:S[o.value])==null?void 0:N[n.value])==null?void 0:i.nkaList)),1)]),e("td",be,[e("span",ge,u(g((L=($=(y=t(a).bestSolutionData)==null?void 0:y[o.value])==null?void 0:$[n.value])==null?void 0:L.nkaList)),1)])])])]),t(a).service.available?(r(),I(M,{key:0,timestamp:t(a).service.lastGet},null,8,["timestamp"])):U("",!0)])}}}),fe=J(ye,[["__scopeId","data-v-0c33603b"]]),he={class:"flex flex-column align-items-center"},xe={class:"flex mt-4 mb-3 align-items-center",style:{gap:"0.5rem"}},ke={class:"flex align-items-center"},Ve={class:"flex align-items-center"},Se={class:"flex mb-3 justify-content-evenly"},Ne={key:0,class:"text-sm align-self-start",style:{"border-collapse":"collapse"}},$e={class:"text-align-center border-solid border-500 border-1",style:{padding:"0.3rem"}},Le={class:"text-align-center border-solid border-500 border-1",style:{padding:"0.3rem"}},De={class:"flex",style:{gap:"2rem"}},Ue=T({__name:"UserSolution",setup(D){const f=H(),o=x(se()),n=x(null),a=x(!1),b=x(!1),h=x(f.sysNumList),m=C(()=>{var p,l;return{nkaForSolution:h.value,signalType:(p=n.value)==null?void 0:p.value,bis:(l=o.value)==null?void 0:l.bisId,worstNkaRequest:b.value,useSignalsWithLn:a.value}}),s=Q({url:"/nav_solution_analyse",startImmediately:!1,updateRate:5e3}),g=()=>{s.post(m.value),s.start()},d=()=>{s.stop()};return K(()=>m.value,p=>{s.intervalID&&s.post(p)}),(p,l)=>{var k,V,S,N;return r(),c("article",he,[e("div",xe,[_(X,{modelValue:o.value,"onUpdate:modelValue":l[0]||(l[0]=i=>o.value=i),"is-with-checkbox":!1,class:"text-sm w-2"},null,8,["modelValue"]),_(Y,{modelValue:n.value,"onUpdate:modelValue":l[1]||(l[1]=i=>n.value=i),mode:"pair",class:"text-sm w-2"},null,8,["modelValue"]),e("div",ke,[_(t(B),{id:"unreliable-signal",modelValue:a.value,"onUpdate:modelValue":l[2]||(l[2]=i=>a.value=i),binary:!0},null,8,["modelValue"]),l[5]||(l[5]=e("label",{for:"unreliable-signal",class:"text-sm ml-2"}," Использовать НКА с Ln ",-1))]),e("div",Ve,[_(t(B),{id:"search-bad-nka",modelValue:b.value,"onUpdate:modelValue":l[3]||(l[3]=i=>b.value=i),binary:!0},null,8,["modelValue"]),l[6]||(l[6]=e("label",{for:"search-bad-nka",class:"text-sm ml-2"}," Искать НКА, вносящих наиб. погреш. ",-1))])]),_(ae,{modelValue:h.value,"onUpdate:modelValue":l[4]||(l[4]=i=>h.value=i),class:"mb-3"},null,8,["modelValue"]),e("div",Se,[n.value&&o.value?(r(),I(fe,{key:0,bis:o.value,"signal-type":(k=n.value)==null?void 0:k.value,class:"mr-3"},null,8,["bis","signal-type"])):U("",!0),e("div",null,[Object.entries(((V=t(s).data)==null?void 0:V.worstNkaSearchResult)??{}).length>0?(r(),c("table",Ne,[l[7]||(l[7]=e("tr",null,[e("th",{class:"border-solid border-500 border-1 p-1 text-primary",style:{padding:"0.3rem"}}," НКА с наиб. погреш. "),e("th",{class:"border-solid border-500 border-1 p-1 text-primary",style:{padding:"0.3rem"}}," Счетчик ")],-1)),(r(!0),c(w,null,z((S=t(s).data)==null?void 0:S.worstNkaSearchResult,(i,y)=>{var $,L;return r(),c("tr",{key:y,class:Z(Number(y)===(($=t(s).data)==null?void 0:$.lastWorstNka)&&"font-bold")},[e("td",$e,u(y)+" "+u(Number(y)===((L=t(s).data)==null?void 0:L.lastWorstNka)?"(текущий)":""),1),e("td",Le,u(i),1)],2)}),128))])):U("",!0),Object.values(((N=t(s).data)==null?void 0:N.worstNkaSearchResult)??{}).length>0?(r(),I(M,{key:1,timestamp:t(s).lastGet},null,8,["timestamp"])):U("",!0)])]),e("div",De,[_(t(A),{disabled:t(s).intervalID!==void 0,label:"Начать расчет",size:"small",class:"m-auto",onClick:g},null,8,["disabled"]),_(t(A),{disabled:t(s).intervalID===void 0,severity:"danger",label:"Остановить расчет",size:"small",class:"m-auto",onClick:d},null,8,["disabled"])])])}}}),Oe=J(Ue,[["__scopeId","data-v-23749fb6"]]);export{Oe as default};
