import{d as x,B as R,w as y,o as i,c as d,u as n,a as S,Z as B,v as O,t as _,l as s,F as g,a6 as I,r as N,O as w,a7 as D,h as C,e as f,a8 as K,a9 as $,aa as U,_ as A}from"./index-B9ncFhZ9.js";import{k as H,_ as F}from"./ResidualsChartPlot.vue_vue_type_script_setup_true_lang-DQR_6QNf.js";import{R as P,C as z,r as E,d as b,N as G,a as V,b as j}from"./knp-style-BUSAdRBo.js";const L={key:1},M={key:2,class:"lds-ring"},T=x({__name:"NavSolutionsPlaneChart",props:{groupBy:{},namingKey:{},depth:{},updateRate:{},id:{},colors:{},names:{}},setup(m){const a=m;typeof window<"u"&&(window.ResizeObserver=window.ResizeObserver||P),z.register(...E);const l=H({url:"/nav_solution",depth:a.depth,updateRate:a.updateRate,startImmediately:!1});l.setGroup(a.groupBy);function o(e){l.emptyData(),l.getParams={},l.getParams[a.namingKey]=e}o(a.id),l.start();const r={options:{animation:!1,maintainAspectRatio:!0,responsive:!1,parsing:{xAxisKey:"e",yAxisKey:"n"},scales:{x:{min:-5,max:5,title:{display:!0,text:"E"}},y:{min:-5,max:5,title:{display:!0,text:"N"}}},plugins:{zoom:{zoom:{wheel:{enabled:!0},drag:{enabled:!0},mode:"xy"}}}}},u=R(()=>{const e={};return l.available&&a.id&&l.groupedData!==void 0?(e.datasets=Object.values(l.groupedData),e.datasets.forEach((t,p)=>{if(t.length!==0){const c=e.datasets[p].data[0];c!==void 0&&(e.datasets[p].label=a.names[c[a.groupBy]],e.datasets[p].backgroundColor=a.colors[c[a.groupBy]])}}),e):{datasets:[]}}),{scatterChartProps:h}=b.useScatterChart({chartData:u,...r});return y(()=>a.depth,e=>{l.setDepth(e)}),y(()=>a.id,e=>{o(e)}),(e,t)=>(i(),d(g,null,[n(l).available?(i(),S(n(b.ScatterChart),B({key:0},n(h),{height:500,width:500}),null,16)):O("",!0),n(l).available?(i(),d("p",L,"Последнее обновление "+_(n(l).lastGet),1)):(i(),d("div",M,t[0]||(t[0]=[s("div",null,null,-1),s("div",null,null,-1),s("div",null,null,-1),s("div",null,null,-1)])))],64))}}),Z={key:1},q={key:2,class:"lds-ring"},J=x({__name:"NavSolutionsENUChart",props:{groupBy:{},namingKey:{},depth:{},updateRate:{},id:{},colors:{},names:{}},setup(m){const a=m,l=["e","n","u","dt"];typeof window<"u"&&(window.ResizeObserver=window.ResizeObserver||P),z.register(...E);const o=H({url:"/nav_solution",depth:a.depth,updateRate:a.updateRate,startImmediately:!1});o.setGroup(a.groupBy);function r(t){o.emptyData(),o.getParams={},o.getParams[a.namingKey]=t}r(a.id),o.start();const u={options:{animation:!1,scales:{x:{type:"time",time:{tooltipFormat:"HH:mm:ss",displayFormats:{millisecond:"HH:mm:ss",second:"HH:mm:ss",minute:"HH:mm",hour:"HH"}},title:{display:!0,text:"МДВ"}},y:{title:{display:!0,text:"E, N, U, м"},position:"left"},y2:{title:{display:!0,text:"dt, м"},position:"right"}}}},h=R(()=>{const t={};return o.available&&a.id&&o.groupedData!==void 0?(t.datasets=[],l.forEach((p,c)=>{const v={};v.data=Object.values(o.groupedData)[0].data.map(k=>({y:k[l[c]],x:k.timestamp})),v.label=a.names[l[c]],v.backgroundColor=a.colors[l[c]],v.yAxisID="y",t.datasets.push(v)}),t.datasets[t.datasets.length-1].yAxisID="y2",t):{datasets:[]}}),{scatterChartProps:e}=b.useScatterChart({chartData:h,...u});return y(()=>a.depth,t=>{o.setDepth(t)}),y(()=>a.id,t=>{r(t)}),(t,p)=>(i(),d(g,null,[n(o).available?(i(),S(n(b.ScatterChart),I(B({key:0},n(e))),null,16)):O("",!0),n(o).available?(i(),d("p",Z,"Последнее обновление "+_(n(o).lastGet),1)):(i(),d("div",q,p[0]||(p[0]=[s("div",null,null,-1),s("div",null,null,-1),s("div",null,null,-1),s("div",null,null,-1)])))],64))}}),Q={class:"bis"},W={class:"bis__options"},X={class:"bis__option"},Y={id:"depth-selector"},ee=["value"],te={class:"bis__option"},ae={id:"depth-selector"},se=["value"],oe={class:"bis__residuals"},le={class:"bis__plane"},ne={class:"bis__enu"},ie=x({__name:"Bis",props:{id:{}},setup(m){const a=[{text:"1 мин",value:60},{text:"3 мин",value:180},{text:"5 мин",value:300},{text:"10 мин",value:600}],l=[{text:"1 c",value:1e3},{text:"5 c",value:5e3},{text:"15 c",value:15e3},{text:"1 мин",value:6e4}],o=N(300),r=N(5e3),u=m;return(h,e)=>(i(),d("div",Q,[s("section",W,[s("div",X,[e[2]||(e[2]=s("label",{for:"depth-selector"},"Глубина наблюдений",-1)),s("div",Y,[w(s("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.value=t)},[(i(),d(g,null,C(a,t=>s("option",{key:t.value,value:t.value},_(t.text),9,ee)),64))],512),[[D,o.value]])])]),s("div",te,[e[3]||(e[3]=s("label",{for:"depth-selector"},"Частота обновления",-1)),s("div",ae,[w(s("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>r.value=t)},[(i(),d(g,null,C(l,t=>s("option",{key:t.value,value:t.value},_(t.text),9,se)),64))],512),[[D,r.value]])])])]),s("section",oe,[e[4]||(e[4]=s("h2",null,"График невязок",-1)),f(F,{id:u.id,"group-by":"nka","naming-key":"bis",depth:o.value,"update-rate":r.value,colors:n(G),names:n(K),"y-values":"residual"},null,8,["id","depth","update-rate","colors","names"])]),s("section",le,[e[5]||(e[5]=s("h2",null,"График РНЗ в плане",-1)),f(T,{id:u.id,"group-by":"excluded","naming-key":"bis",depth:o.value,"update-rate":r.value,colors:n(V),names:n($)},null,8,["id","depth","update-rate","colors","names"])]),s("section",ne,[e[6]||(e[6]=s("h2",null,"График РНЗ по составляющим",-1)),f(J,{id:u.id,"group-by":"excluded","naming-key":"bis",depth:o.value,"update-rate":r.value,colors:n(j),names:n(U)},null,8,["id","depth","update-rate","colors","names"])])]))}}),pe=A(ie,[["__scopeId","data-v-a8a34df4"]]);export{pe as default};
